(self.webpackChunk=self.webpackChunk||[]).push([[923],{4923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ve});r(8304),r(489),r(6992),r(1539),r(3948),r(9653),r(2419),r(8011),r(9070),r(2526),r(1817),r(2165),r(8783);var n=r(7931),a=r(5166),o=(r(8309),(0,a.withScopeId)("data-v-d519a7d8"));(0,a.pushScopeId)("data-v-d519a7d8");var i={class:"flex-grow flex flex-col relative"},l={class:"w-full h-full flex flex-col flex-grow p-3"},u={key:0,class:"flex-grow flex items-center justify-center"},c=(0,a.createVNode)("span",{class:"text-center text-gray-800 text-md md:text-xl"}," Drop your files here or click to select ",-1);(0,a.popScopeId)();var s=o((function(e,t,r,n,s,p){var f=(0,a.resolveComponent)("MediaResizeOptions"),d=(0,a.resolveComponent)("MediaUploadableFile"),m=(0,a.resolveComponent)("draggable");return(0,a.openBlock)(),(0,a.createBlock)("div",i,[(0,a.createVNode)(f,{modelValue:e.resizeOptions,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.resizeOptions=t}),class:{"absolute left-0 top-0 z-10":!e.resizeOptions.enabled,"mb-3":e.resizeOptions.enabled}},null,8,["modelValue","class"]),(0,a.createVNode)("div",{class:["dropzone",{dragover:e.isDraggingOver,"justify-center":0===e.files.length,"justify-around":e.files.length>0}],onDragover:t[4]||(t[4]=(0,a.withModifiers)((function(){}),["prevent"])),onDragenter:t[5]||(t[5]=(0,a.withModifiers)((function(){return e.onDragEnter&&e.onDragEnter.apply(e,arguments)}),["prevent"])),onDragleave:t[6]||(t[6]=(0,a.withModifiers)((function(){return e.onDragLeave&&e.onDragLeave.apply(e,arguments)}),["prevent"])),onDrop:t[7]||(t[7]=(0,a.withModifiers)((function(){return e.onDrop&&e.onDrop.apply(e,arguments)}),["stop","prevent"]))},[(0,a.createVNode)("label",l,[0===e.files.length?((0,a.openBlock)(),(0,a.createBlock)("span",u,[c])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)("input",{ref:"fileInput",type:"file",multiple:"",onChange:t[2]||(t[2]=function(){return e.onDrop&&e.onDrop.apply(e,arguments)})},null,544),(0,a.renderSlot)(e.$slots,"default",{},(function(){return[0!==e.files.length?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,class:"flex flex-wrap gap-3",list:e.files,"item-key":function(e){return e.name},group:"files"},{item:o((function(t){var r=t.element,n=t.index;return[(0,a.createVNode)(d,{file:r,onRemove:function(t){return e.removeFile(n)}},null,8,["file","onRemove"])]})),_:1},8,["list","item-key"])):(0,a.createCommentVNode)("",!0)]}),{},!0)]),!e.autoUpload&&e.files.length>0?((0,a.openBlock)(),(0,a.createBlock)("button",{key:0,type:"button",class:"btn btn-color-primary m-3 self-start",onClick:t[3]||(t[3]=function(){return e.startUpload&&e.startUpload.apply(e,arguments)})}," Start upload ")):(0,a.createCommentVNode)("",!0)],34)])})),p=(r(7941),r(561),r(4553),r(9980)),f=r.n(p);r(5666),r(2772),r(4916),r(3123),r(9575),r(2472),r(2990),r(8927),r(3105),r(5035),r(4345),r(7174),r(2846),r(4731),r(7209),r(6319),r(8867),r(7789),r(3739),r(9368),r(4483),r(2056),r(3462),r(678),r(7462),r(3824),r(5021),r(2974),r(5016),r(9826),r(8674),r(7042),r(1038),r(9753),r(5306),r(4197);var d=r(2918),m=r.n(d);function v(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"createImageDataURLFromFile",value:function(t){var r=new FileReader;return new Promise((function(n,a){r.onerror=function(){a(new DOMException("Problem parsing input file."))},r.onload=function(){var t,r=(t=regeneratorRuntime.mark((function t(r){var a,o,i,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=document.createElement("img")).src=null===(a=r.target)||void 0===a?void 0:a.result,!(l=m().readFromBinaryFile(e.base64ToArrayBuffer(null===(o=r.target)||void 0===o?void 0:o.result)))||!Object.prototype.hasOwnProperty.call(l,"Orientation")){t.next=7;break}return t.next=6,e.rotateBase64Image(i.src,l.Orientation);case 6:i.src=t.sent;case 7:n(i);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){v(o,n,a,i,l,"next",e)}function l(e){v(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}(),r.readAsDataURL(t)}))}},{key:"resizeImage",value:function(t,r){var n=e.calculateScaleDimensions(t.width,t.height,r.width,r.height),a=e.downscaleImage(t,n.ratio),o=document.createElement("img");return o.src=a.toDataURL(r.mimeType||"image/WebP",r.quality?r.quality/100:.934),o}},{key:"getImageFileSize",value:function(e){var t=e.src.replace(/^data:([^;]+);base64,/gim,""),r=4*t.length/3,n=t.length%3?3-t.length%3:0;return r+n+(2+2*(r+n)/72)}},{key:"calculateScaleDimensions",value:function(e,t,r,n){var a=Math.min(r/e,n/t);return{ratio:a,width:e*a,height:t*a}}},{key:"downscaleImage",value:function(t,r){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var a=n.getContext("2d");if(a)return a.drawImage(t,0,0),r>=1?n:e.downscaleCanvas(n,a,r);throw new Error("Error while resizing image.")}},{key:"downscaleCanvas",value:function(e,t,r){if(!(r<1&&r>0))throw new Error("Scale must be a positive number <1");var n=r*r,a=e.width,o=e.height,i=Math.floor(a*r),l=Math.floor(o*r),u=0,c=0,s=0,p=0,f=0,d=0,m=0,v=0,h=0,g=0,y=0,b=0,w=0,x=0,k=0,O=!1,V=!1,U=t.getImageData(0,0,a,o).data,S=new Float32Array(3*i*l),z=0,D=0,B=0;for(c=0;c<o;c++)for(f=c*r,d=3*(h=Math.floor(f))*i,(V=h!==Math.floor(f+r))&&(x=h+1-f,k=f+r-h-1),u=0;u<a;u++,s+=4)p=u*r,m=d+3*(v=Math.floor(p)),(O=v!==Math.floor(p+r))&&(b=v+1-p,w=p+r-v-1),z=U[s],D=U[s+1],B=U[s+2],O||V?O&&!V?(g=b*r,S[m]+=z*g,S[m+1]+=D*g,S[m+2]+=B*g,y=w*r,S[m+3]+=z*y,S[m+4]+=D*y,S[m+5]+=B*y):V&&!O?(g=x*r,S[m]+=z*g,S[m+1]+=D*g,S[m+2]+=B*g,y=k*r,S[m+3*i]+=z*y,S[m+3*i+1]+=D*y,S[m+3*i+2]+=B*y):(g=b*x,S[m]+=z*g,S[m+1]+=D*g,S[m+2]+=B*g,y=w*x,S[m+3]+=z*y,S[m+4]+=D*y,S[m+5]+=B*y,y=b*k,S[m+3*i]+=z*y,S[m+3*i+1]+=D*y,S[m+3*i+2]+=B*y,y=w*k,S[m+3*i+3]+=z*y,S[m+3*i+4]+=D*y,S[m+3*i+5]+=B*y):(S[m]+=z*n,S[m+1]+=D*n,S[m+2]+=B*n);var N=document.createElement("canvas");N.width=i,N.height=l;var I=N.getContext("2d");if(!I)throw new Error("Error downscaling image.");var C=I.getImageData(0,0,i,l),F=C.data,M=0;for(s=0,m=0;M<i*l;s+=3,m+=4,M++)F[m]=Math.ceil(S[s]),F[m+1]=Math.ceil(S[s+1]),F[m+2]=Math.ceil(S[s+2]),F[m+3]=255;return I.putImageData(C,0,0),N}},{key:"base64ToArrayBuffer",value:function(e){e=e.replace(/^data:([^;]+);base64,/gim,"");for(var t=atob(e),r=t.length,n=new Uint8Array(r),a=0;a<r;a++)n[a]=t.charCodeAt(a);return n.buffer}},{key:"rotateBase64Image",value:function(e,t){if(-1===[3,6,8].indexOf(t))return new Promise((function(t){t(e)}));var r=document.createElement("canvas"),n=r.getContext("2d");return new Promise((function(a){var o=new Image;o.onload=function(){6===t||8===t?(r.height=o.width,r.width=o.height):3===t&&(r.width=o.width,r.height=o.height),6===t?(n.rotate(90*Math.PI/180),n.translate(0,-r.width)):8===t?(n.rotate(-90*Math.PI/180),n.translate(-r.height,0)):3===t&&n.rotate(Math.PI),n.drawImage(o,0,0),a(r.toDataURL("image/jpeg",100))},o.src=e}))}}],(r=null)&&h(t.prototype,r),n&&h(t,n),e}(),y=r(9669),b=r.n(y);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=O(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function O(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){U(o,n,a,i,l,"next",e)}function l(e){U(o,n,a,i,l,"throw",e)}i(void 0)}))}}var z=(0,a.withScopeId)("data-v-4c5c85f2");(0,a.pushScopeId)("data-v-4c5c85f2");var D={class:"relative"},B={key:1,class:"square flex items-center justify-center"},N=(0,a.createVNode)("i",{class:"fa fa-file text-primary text-9xl"},null,-1),I={class:"flex flex-col mt-3"},C={class:"w-full text-center text-sm text-primary mb-2"},F={class:"w-full flex flex-row justify-between items-center space-x-3"},M={class:"relative flex-grow"},j={class:"overflow-hidden h-2 text-xs flex rounded bg-primary-100"},R=(0,a.createVNode)("i",{class:"fa fa-times text-red-600"},null,-1),q={key:0,class:"flex flex-col"},P={key:0,class:"text-red-600 font-semibold"},E={key:1,class:"text-red-600 font-semibold"},_={key:2,class:"text-gray-800 text-sm"};(0,a.popScopeId)();var T=z((function(e,t,r,n,o,i){return(0,a.openBlock)(),(0,a.createBlock)("div",{class:["uploadable-file",{error:e.file.error}],draggable:"true",onClick:t[2]||(t[2]=(0,a.withModifiers)((function(){}),["prevent"]))},[(0,a.createVNode)("div",D,[e.imageSource?((0,a.openBlock)(),(0,a.createBlock)("img",{key:0,src:e.imageSource,class:"square object-contain",alt:"Loading..."},null,8,["src"])):((0,a.openBlock)(),(0,a.createBlock)("div",B,[N]))]),(0,a.createVNode)("div",I,[(0,a.createVNode)("p",C,(0,a.toDisplayString)(e.file.file.name),1),(0,a.createVNode)("div",F,[(0,a.createVNode)("div",M,[(0,a.createVNode)("div",j,[(0,a.createVNode)("div",{style:{width:100*e.file.uploadProgress+"%"},class:"\n                                shadow-none\n                                flex flex-col\n                                text-center\n                                whitespace-nowrap\n                                text-white\n                                justify-center\n                                bg-primary\n                            "},null,4)])]),(0,a.createVNode)("button",{onClick:t[1]||(t[1]=(0,a.withModifiers)((function(t){return e.$emit("remove")}),["prevent"]))},[R])]),e.file.error?((0,a.openBlock)(),(0,a.createBlock)("div",q,["file_too_big"===e.file.error?((0,a.openBlock)(),(0,a.createBlock)("span",P,"File is too big!")):(0,a.createCommentVNode)("",!0),"upload_error"===e.file.error?((0,a.openBlock)(),(0,a.createBlock)("span",E,"Upload failed!")):(0,a.createCommentVNode)("",!0),e.file.image?((0,a.openBlock)(),(0,a.createBlock)("span",_,"Consider resizing before upload.")):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0)])],2)}));const A=(0,a.defineComponent)({name:"MediaUploadableFile",props:{file:{type:Object,required:!0}},emits:["remove"],setup:function(e){return{imageSource:(0,a.computed)((function(){return e.file.thumbnail?e.file.thumbnail.src:null}))}}});A.render=T,A.__scopeId="data-v-4c5c85f2";const L=A;var Y=(0,a.withScopeId)("data-v-33a648c1");(0,a.pushScopeId)("data-v-33a648c1");var $={class:"flex flex-col md:flex-row justify-start items-start gap-2 md:gap-5"},G=(0,a.createVNode)("span",null,"Resize before upload",-1),J={key:0,class:"resize-options"},Q=(0,a.createVNode)("label",{for:"resize-options-width"},"Max width",-1),W=(0,a.createVNode)("label",null,"Max height",-1),H=(0,a.createVNode)("label",null,"Format",-1),K={key:0,class:"quality"},X=(0,a.createVNode)("label",null,"Quality",-1),Z={class:"flex justify-between items-center gap-3"};(0,a.popScopeId)();var ee=Y((function(e,t,r,n,o,i){return(0,a.openBlock)(),(0,a.createBlock)("div",$,[(0,a.createVNode)("label",{class:["resize-checkbox",{enabled:e.resizeOptions.enabled}]},[(0,a.withDirectives)((0,a.createVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.resizeOptions.enabled=t}),type:"checkbox"},null,512),[[a.vModelCheckbox,e.resizeOptions.enabled]]),G],2),e.resizeOptions.enabled?((0,a.openBlock)(),(0,a.createBlock)("div",J,[(0,a.createVNode)("div",null,[Q,(0,a.withDirectives)((0,a.createVNode)("input",{id:"resize-options-width","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.resizeOptions.width=t}),type:"number"},null,512),[[a.vModelText,e.resizeOptions.width,void 0,{number:!0}]])]),(0,a.createVNode)("div",null,[W,(0,a.withDirectives)((0,a.createVNode)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.resizeOptions.height=t}),type:"number"},null,512),[[a.vModelText,e.resizeOptions.height,void 0,{number:!0}]])]),(0,a.createVNode)("div",null,[H,(0,a.withDirectives)((0,a.createVNode)("select",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.resizeOptions.mimeType=t})},[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(e.mimeTypes,(function(e,t){return(0,a.openBlock)(),(0,a.createBlock)("option",{key:t,value:e.value},(0,a.toDisplayString)(e.label),9,["value"])})),128))],512),[[a.vModelSelect,e.resizeOptions.mimeType]])]),"image/jpeg"===e.resizeOptions.mimeType?((0,a.openBlock)(),(0,a.createBlock)("div",K,[X,(0,a.createVNode)("div",Z,[(0,a.withDirectives)((0,a.createVNode)("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.resizeOptions.quality=t}),type:"range",min:0,max:100,step:1},null,512),[[a.vModelText,e.resizeOptions.quality]]),(0,a.createVNode)("span",null,(0,a.toDisplayString)(e.resizeOptions.quality),1)])])):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0)])}));function te(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"modelValue";return(0,a.computed)({get:function(){return e[r]},set:function(e){return t("update:".concat(r),e)}})}const re=(0,a.defineComponent)({name:"MediaResizeOptions",props:{modelValue:{type:Object,required:!0}},setup:function(e,t){return{mimeTypes:[{value:"image/jpeg",label:"JPEG"},{value:"image/png",label:"PNG"}],resizeOptions:te(e,t.emit)}}});re.render=ee,re.__scopeId="data-v-33a648c1";const ne=re;var ae=r(2853),oe=r(7560);const ie=(0,a.defineComponent)({name:"MediaUploader",components:{MediaUploadableFile:L,MediaResizeOptions:ne,draggable:f()},props:{uploadUrl:{type:String,required:!0},maxUploadSize:{type:Number,required:!0},sequential:Boolean,autoUpload:Boolean},setup:function(e){var t,r,n=(0,a.ref)(null),o=(0,a.reactive)({enabled:!1,width:800,height:800,quality:75,mimeType:"image/jpeg"}),i=function(){var e=(0,a.ref)(0),t=(0,a.ref)(!1);function r(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.msMaxTouchPoints)}return{isDraggingOver:t,onDragEnter:function(n){n.preventDefault(),r()&&(e.value++,t.value=!0)},onDragLeave:function(n){n.preventDefault(),r()&&(e.value--,e.value<=0&&(e.value=0,t.value=!1))}}}(),l=i.isDraggingOver,u=i.onDragEnter,c=i.onDragLeave,s=function(e){var t=(0,a.ref)([]);function r(){return(r=S(regeneratorRuntime.mark((function r(a){var o,l,u,c,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:l=[],u=k(a),r.prev=2,s=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.value,!t.value.find((function(e){return e.file.name===r.name}))){e.next=3;break}return e.abrupt("return","continue");case 3:return e.prev=3,e.t0=l,e.next=7,n(r);case 7:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(3),l.push({file:r,image:document.createElement("img")});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})),u.s();case 5:if((c=u.n()).done){r.next=12;break}return r.delegateYield(s(),"t0",7);case 7:if("continue"!==r.t0){r.next=10;break}return r.abrupt("continue",10);case 10:r.next=5;break;case 12:r.next=17;break;case 14:r.prev=14,r.t1=r.catch(2),u.e(r.t1);case 17:return r.prev=17,u.f(),r.finish(17);case 20:if((o=t.value).push.apply(o,l),!e.autoUpload){r.next=24;break}return r.next=24,i();case 24:case"end":return r.stop()}}),r,null,[[2,14,17,20]])})))).apply(this,arguments)}function n(e){return o.apply(this,arguments)}function o(){return(o=S(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"!==t.type.substr(0,5)){e.next=6;break}return e.next=3,g.createImageDataURLFromFile(t);case 3:return r=e.sent,n=g.resizeImage(r,{width:250,height:250,quality:60}),e.abrupt("return",{file:t,image:r,thumbnail:n});case 6:return e.abrupt("return",{file:t});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return l.apply(this,arguments)}function l(){return(l=S(regeneratorRuntime.mark((function r(){var n,a,o,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=o[a]).image&&e.resizeOptions&&e.resizeOptions.enabled&&(e.resizeOptions.width<r.image.width||e.resizeOptions.height<r.image.height))){t.next=10;break}if(r.image=g.resizeImage(r.image,e.resizeOptions),!(g.getImageFileSize(r.image)>=e.maxUploadSize)){t.next=8;break}if(r.error="file_too_big",!e.sequential){t.next=7;break}return t.abrupt("return",{v:void 0});case 7:return t.abrupt("return","continue");case 8:t.next=15;break;case 10:if(!(r.file.size>=e.maxUploadSize)){t.next=15;break}if(r.error="file_too_big",!e.sequential){t.next=14;break}return t.abrupt("return",{v:void 0});case 14:return t.abrupt("return","continue");case 15:if(e.sequential){t.next=19;break}u(r).then((function(t){t&&e.onFileUploaded&&e.onFileUploaded({parsedFile:r,mediaFile:t.data})})).catch((function(){r.error="upload_error"})),t.next=30;break;case 19:return t.prev=19,t.next=22,u(r);case 22:(n=t.sent)&&e.onFileUploaded&&e.onFileUploaded({parsedFile:r,mediaFile:n.data}),t.next=30;break;case 26:return t.prev=26,t.t0=t.catch(19),r.error="upload_error",t.abrupt("return",{v:void 0});case 30:case"end":return t.stop()}}),t,null,[[19,26]])})),a=0,o=x(t.value);case 2:if(!(a<o.length)){r.next=12;break}return r.delegateYield(n(),"t0",4);case 4:if("continue"!==(i=r.t0)){r.next=7;break}return r.abrupt("continue",9);case 7:if("object"!==w(i)){r.next=9;break}return r.abrupt("return",i.v);case 9:a++,r.next=2;break;case 12:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function u(r){var n=new FormData;if(r.image){var a=new File([c(r.image.src)],r.file.name,{type:r.file.type});n.append("file",a)}else n.append("file",r.file);return b().post(e.uploadUrl,n,{headers:{"Content-Type":"multipart/form-data"},maxContentLength:e.maxUploadSize,onUploadProgress:function(e){t.value[t.value.indexOf(r)].uploadProgress=e.loaded/e.total}})}function c(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return new Blob([n],{type:r})}return{files:t,queueFilesForUpload:function(e){return r.apply(this,arguments)},startUpload:i}}({uploadUrl:e.uploadUrl,maxUploadSize:e.maxUploadSize,sequential:null!==(t=e.sequential)&&void 0!==t&&t,autoUpload:null===(r=e.autoUpload)||void 0===r||r,resizeOptions:o,onFileUploaded:function(e){var t=e.parsedFile,r=e.mediaFile;p.value.splice(p.value.findIndex((function(e){return e.file.name===t.file.name})),1),ae.Y.emit(oe.aV,{parsedFile:t,mediaFile:r,remainingCount:p.value.length})}}),p=s.files,f=s.queueFilesForUpload,d=s.startUpload;return{fileInput:n,resizeOptions:o,files:p,isDraggingOver:l,onDragEnter:u,onDragLeave:c,onDrop:function(e){if(c(e),e.target&&e.target.files&&e.target.files.length>0||e.dataTransfer&&Object.keys(e.dataTransfer.files).length>0){var t,r,a=(null===(t=e.target)||void 0===t?void 0:t.files)||(null===(r=e.dataTransfer)||void 0===r?void 0:r.files)||[];f(a)}n.value.value=""},startUpload:d,removeFile:function(e){p.value.splice(e,1)}}}});ie.render=s,ie.__scopeId="data-v-d519a7d8";const le=ie;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=me(e);if(t){var a=me(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return de(this,r)}}function de(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(i,e);var t,r,n,o=fe(i);function i(){return ce(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"connect",value:function(){(0,a.createApp)(le,{uploadUrl:this.uploadUrlValue,maxUploadSize:this.maxUploadSizeValue,autoUpload:this.hasAutoUploadValue?this.autoUploadValue:void 0,sequential:this.hasSequentialValue?this.sequentialValue:void 0}).mount("#media-uploader")}}])&&se(t.prototype,r),n&&se(t,n),i}(n.Controller);ve.values={uploadUrl:String,maxUploadSize:Number,autoUpload:Boolean,sequential:Boolean}}}]);