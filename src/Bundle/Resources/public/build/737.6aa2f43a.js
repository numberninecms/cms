(self.webpackChunk=self.webpackChunk||[]).push([[737],{6970:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ot});n(4812),n(8304),n(489),n(6992),n(1539),n(3948),n(2419),n(8011),n(9070),n(2526),n(1817),n(2165),n(8783);var i=n(4330),l=n(5166),r=n(5684),a=n(4347),o={key:0,class:"flex flex-col h-full"},c={class:"flex flex-col p-3"},s={key:0,class:"col-span-1 flex flex-col gap-3 overflow-y-auto"},u={class:"flex-grow overflow-y-auto"},d={class:"flex justify-end"};n(7327);var f={class:"py-3 px-3"},m={class:"flex items-center justify-between flex-wrap"},p={class:"font-medium text-white"},v=[(0,l.createElementVNode)("span",{class:"sr-only"},"Dismiss",-1),(0,l.createElementVNode)("i",{class:"fa fa-times"},null,-1)];n(9653),n(2564);var h=(0,r.Q_)({id:"flashes",state:function(){return{label:"",message:"",visible:!1}}});const y=(0,l.defineComponent)({name:"FlashBar",props:{delay:{type:Number,default:3e3}},emits:["update:visible"],setup:function(e){var t=h();(0,l.watchEffect)((function(){t.visible&&setTimeout((function(){n()}),e.delay)}));var n=function(){t.visible=!1};return{visible:(0,l.computed)((function(){return t.visible})),label:(0,l.computed)((function(){return t.label})),message:(0,l.computed)((function(){return t.message})),dismiss:n}}});var x=n(3744);const b=(0,x.Z)(y,[["render",function(e,t,n,i,r,a){return e.visible?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,class:(0,l.normalizeClass)(["flash-"+e.label,"z-20"])},[(0,l.createElementVNode)("div",f,[(0,l.createElementVNode)("div",m,[(0,l.createElementVNode)("p",p,(0,l.toDisplayString)(e.message),1),(0,l.createElementVNode)("button",{type:"button",class:"-mr-1 flex p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-white text-white",onClick:t[0]||(t[0]=function(){return e.dismiss&&e.dismiss.apply(e,arguments)})},v)])])],2)):(0,l.createCommentVNode)("",!0)}]]);var g={class:"modal-backdrop-container"},k={class:"flex justify-end gap-1 p-3 shadow"},w=[(0,l.createElementVNode)("i",{class:"fa fa-chevron-left"},null,-1)],F=[(0,l.createElementVNode)("i",{class:"fa fa-chevron-right"},null,-1)],M=[(0,l.createElementVNode)("i",{class:"fa fa-times"},null,-1)],E={class:"overflow-hidden flex flex-grow p-3"},V={class:"flex flex-grow items-center md:w-3/4"},B=["src","alt"],N={key:1,class:"flex items-center justify-center"},S=[(0,l.createElementVNode)("i",{class:"fa fa-file text-primary text-7xl"},null,-1)],C={class:"hidden md:flex md:flex-grow md:w-1/4"};n(2222);var U=n(2520),I=n.n(U);function _(){return{imageUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"thumbnail";return e&&"image"===e.mimeType.substr(0,5)&&Object.prototype.hasOwnProperty.call(e.sizes,t)?"".concat(I().dirname(e.path),"/").concat(e.sizes[t].filename):null}}}n(9254);var T={class:"flex flex-col flex-grow gap-3"},O={key:0,class:"flex justify-center p-3"},A=["src","alt"],j={class:"flex-grow"},P={class:"flex-shrink-0 text-gray-400 font-semibold lg:text-right lg:w-1/3"},D={key:0},R=["href"],z={key:1,class:"break-all"};n(6755),n(6977);var L=n(1280),q=n(1798),Z=(n(5666),n(1249),n(9554),n(4747),n(9686),n(4553),n(9826),n(2772),n(7042),n(8674),n(9753),n(1038),n(8309),n(4916),n(9669)),Y=n.n(Z);function Q(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function G(e,t,n,i,l,r,a){try{var o=e[r](a),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,l)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(i,l){var r=e.apply(t,n);function a(e){G(r,i,l,a,o,"next",e)}function o(e){G(r,i,l,a,o,"throw",e)}a(void 0)}))}}var W=(0,r.Q_)({id:"mediaFiles",state:function(){return{getUrl:"",deleteUrl:"",mediaFiles:[],selectedMediaFiles:[],filter:"",page:1,maxPages:1,isFetching:!1,queue:[],selectionFirstIndex:-1,selectMultiple:!1}},actions:{setup:function(e){var t=e.getUrl,n=e.deleteUrl;this.getUrl=t,this.deleteUrl=n},loadMoreMediaFiles:function(){var e=this;return H(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=function(){var t=H(regeneratorRuntime.mark((function t(){var n,i,l,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:1,i={startRow:20*(n-1),fetchCount:20,filter:e.filter,orderBy:"createdAt",order:"desc",status:"publish,private,pending_review,password,draft"},t.next=4,Y().get(e.getUrl,{params:i});case 4:return l=t.sent,t.abrupt("return",l.data);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=function(){var t=H(regeneratorRuntime.mark((function t(){var i,l,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.page>e.maxPages)){t.next=2;break}return t.abrupt("return");case 2:return e.isFetching=!0,t.next=5,n(e.page++);case 5:if(l=t.sent,e.maxPages=l.page.last,(i=e.mediaFiles).push.apply(i,Q(l.collection)),e.isFetching=!1,!(r=e.queue.shift())){t.next=13;break}return t.next=13,r();case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),!e.isFetching){t.next=5;break}return e.queue.push(i),t.abrupt("return");case 5:return t.next=7,i();case 7:case"end":return t.stop()}}),t)})))()},deleteMediaFiles:function(e){var t=this;return H(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Y().post(t.deleteUrl,{ids:e.map((function(e){return e.id}))});case 2:e.forEach((function(e){t.mediaFiles.splice(t.mediaFiles.findIndex((function(t){return t.id===e.id})),1)}));case 3:case"end":return n.stop()}}),n)})))()},setBulkSelectFirstIndex:function(e){var t=this,n=this.selectedMediaFiles.find((function(n){return n.id===t.mediaFiles[e].id}));!!n?this.selectedMediaFiles.splice(this.selectedMediaFiles.indexOf(n),1):this.selectMediaFile(this.mediaFiles[e]),this.selectionFirstIndex=e},bulkMediaSelect:function(e){var t=this;this.selectMultiple&&-1!==this.selectionFirstIndex&&this.mediaFiles.slice(this.selectionFirstIndex,e+1).forEach((function(e){t.selectedMediaFiles.find((function(t){return t.id===e.id}))||t.selectedMediaFiles.push(e)}))},selectMediaFile:function(e){this.selectedMediaFiles.find((function(t){return t.id===e.id}))?this.selectedMediaFiles.splice(this.selectedMediaFiles.findIndex((function(t){return t.id===e.id})),1):this.selectedMediaFiles.push(e)},clearMediaFilesSelection:function(){this.selectedMediaFiles.splice(0,this.selectedMediaFiles.length),this.selectionFirstIndex=-1},isMediaFileSelected:function(e){return!!this.selectedMediaFiles.find((function(t){return t.id===e.id}))}}}),K=(0,r.Q_)({id:"mediaViewer",state:function(){return{displayIndex:-1,show:!1,callback:Object,settings:{}}},actions:{isMediaFileDisplayed:function(e){return W().mediaFiles.findIndex((function(t){return t.id===e.id}))===this.displayIndex}}});const J=(0,l.defineComponent)({name:"MediaFileProperties",props:{showThumbnail:{type:Boolean,required:!1,default:!1}},setup:function(){var e=W(),t=K(),n=_().imageUrl,i={readableBytes:function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}}.readableBytes,r=(0,l.ref)([]),a=(0,l.computed)((function(){return e.mediaFiles[t.displayIndex]}));return(0,l.watchEffect)((function(){if(r.value=[{Name:{value:a.value.slug},Type:{value:a.value.mimeType},Size:{value:i(a.value.fileSize)},Dimensions:{value:"".concat(a.value.width," x ").concat(a.value.height," pixels")}},{Date:{value:(0,L.ZP)(a.value.createdAt,"longDate")},Time:{value:(0,L.ZP)(a.value.createdAt,"isoTime")}},{URL:{value:"".concat(window.location.origin).concat(a.value.path),link:!0}}],a.value.mimeType.startsWith("image/")&&a.value.exif){var e={};a.value.exif["computed.ApertureFNumber"]&&(e.Aperture={value:a.value.exif["computed.ApertureFNumber"]}),a.value.exif["exif.ExposureTime"]&&(e.Exposure={value:a.value.exif["exif.ExposureTime"]}),a.value.exif["exif.FocalLength"]&&(e["Focal length"]={value:q.ku(a.value.exif["exif.FocalLength"])}),a.value.exif["exif.ISOSpeedRatings"]&&(e.ISO={value:a.value.exif["exif.ISOSpeedRatings"]}),a.value.exif["exif.MeteringMode"]&&(e.Metering={value:a.value.exif["exif.MeteringMode"]}),a.value.exif["ifd0.Model"]&&(e.Camera={value:a.value.exif["ifd0.Model"]}),r.value.push(e)}})),{properties:r,imageUrl:n,mediaFile:a}}}),X=(0,x.Z)(J,[["render",function(e,t,n,i,r,a){return(0,l.openBlock)(),(0,l.createElementBlock)("div",T,[e.showThumbnail?((0,l.openBlock)(),(0,l.createElementBlock)("div",O,[(0,l.createElementVNode)("img",{src:e.imageUrl(e.mediaFile,"preview"),alt:e.mediaFile.title,class:"object-contain h-48 shadow"},null,8,A)])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",j,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.properties,(function(e,t){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{key:t,class:"flex-grow mb-3"},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e,(function(e,t){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{key:t,class:"flex text-sm sm:flex-col lg:flex-row lg:gap-3 mb-1 lg:mb-0"},[(0,l.createElementVNode)("div",P,(0,l.toDisplayString)(t),1),e.link?((0,l.openBlock)(),(0,l.createElementBlock)("div",D,[(0,l.createElementVNode)("a",{href:e.value,class:"break-all text-primary hover:underline"},(0,l.toDisplayString)(e.value),9,R)])):((0,l.openBlock)(),(0,l.createElementBlock)("div",z,(0,l.toDisplayString)(e.value),1))])})),128))])})),128))])])}]]),ee=(0,l.defineComponent)({name:"MediaViewer",components:{MediaFileProperties:X},setup:function(){var e=W(),t=K(),n=_().imageUrl;function i(e){"ArrowLeft"===e.key?r():"ArrowRight"===e.key?a():"Escape"===e.key&&o()}function r(){t.displayIndex>0?t.displayIndex--:t.displayIndex=e.mediaFiles.length-1}function a(){t.displayIndex<e.mediaFiles.length-1?t.displayIndex++:t.displayIndex=0}function o(){t.show=!1}return(0,l.onMounted)((function(){window.addEventListener("keydown",i)})),(0,l.onUnmounted)((function(){window.removeEventListener("keydown",i)})),{imageUrl:n,displayIndex:(0,l.computed)((function(){return t.displayIndex})),show:(0,l.computed)((function(){return t.show})),mediaFile:(0,l.computed)((function(){return e.mediaFiles[t.displayIndex]})),navigatePrevious:r,navigateNext:a,closeModal:o}}}),te=(0,x.Z)(ee,[["render",function(e,t,n,i,r,a){var o=(0,l.resolveComponent)("MediaFileProperties");return e.show&&-1!==e.displayIndex?((0,l.openBlock)(),(0,l.createBlock)(l.Teleport,{key:0,to:"body"},[(0,l.createElementVNode)("div",{class:"modal-backdrop",onClick:t[4]||(t[4]=function(){return e.closeModal&&e.closeModal.apply(e,arguments)})},[(0,l.createElementVNode)("div",g,[(0,l.createElementVNode)("div",{class:"modal-card",onClick:t[3]||(t[3]=(0,l.withModifiers)((function(){}),["stop"]))},[(0,l.createElementVNode)("div",k,[(0,l.createElementVNode)("button",{class:"btn btn-color-white btn-style-outline",onClick:t[0]||(t[0]=function(){return e.navigatePrevious&&e.navigatePrevious.apply(e,arguments)})},w),(0,l.createElementVNode)("button",{class:"btn btn-color-white btn-style-outline",onClick:t[1]||(t[1]=function(){return e.navigateNext&&e.navigateNext.apply(e,arguments)})},F),(0,l.createElementVNode)("button",{class:"btn btn-color-white btn-style-outline",onClick:t[2]||(t[2]=function(){return e.closeModal&&e.closeModal.apply(e,arguments)})},M)]),(0,l.createElementVNode)("div",E,[(0,l.createElementVNode)("div",V,[e.imageUrl(e.mediaFile,"large")?((0,l.openBlock)(),(0,l.createElementBlock)("img",{key:0,src:e.imageUrl(e.mediaFile,"large"),alt:e.mediaFile.title,class:"object-scale-down w-full max-h-full"},null,8,B)):((0,l.openBlock)(),(0,l.createElementBlock)("div",N,S))]),(0,l.createElementVNode)("div",C,[(0,l.createVNode)(o,{"media-file":e.mediaFile},null,8,["media-file"])])])])])])])):(0,l.createCommentVNode)("",!0)}]]);var ne={ref:"mediaBrowser",class:"flex flex-col"},ie={class:"flex flex-wrap gap-3"},le=["onClick"],re=["src","alt"],ae={key:1,class:"flex items-center justify-center"},oe=[function(e){return(0,l.pushScopeId)("data-v-76184012"),e=e(),(0,l.popScopeId)(),e}((function(){return(0,l.createElementVNode)("i",{class:"fa fa-file text-primary text-7xl"},null,-1)}))];var ce=n(7560),se=n(2853);function ue(e,t,n,i,l,r,a){try{var o=e[r](a),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,l)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(i,l){var r=e.apply(t,n);function a(e){ue(r,i,l,a,o,"next",e)}function o(e){ue(r,i,l,a,o,"throw",e)}a(void 0)}))}}const fe=(0,l.defineComponent)({name:"MediaThumbnailsList",emits:["thumbnail-clicked","thumbnail-shift-clicked"],setup:function(e,t){var n=t.emit,i=W(),r=K(),a=_().imageUrl,o=(0,l.ref)(null),c=!1,s=!1,u=(0,l.ref)(!1);function d(){return f.apply(this,arguments)}function f(){return(f=de(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!0,e.next=3,i.loadMoreMediaFiles();case 3:c=!1;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,l.onMounted)((function(){se.Y.on(ce.aV,(function(e){i.mediaFiles.splice(0,0,e.mediaFile)})),(s=null!==o.value.closest(".modal-backdrop"))?se.Y.on(ce.im,(function(e){e.visible&&d()})):d()})),(0,l.watch)(i.mediaFiles,de(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==i.mediaFiles.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,l.nextTick)();case 4:if(!u.value){e.next=7;break}return e.next=7,d();case 7:case"end":return e.stop()}}),e)}))),{deep:!0}),{mediaBrowser:o,imageUrl:a,mediaFiles:(0,l.computed)((function(){return i.mediaFiles})),onThumbnailClicked:function(e){var t={index:e,file:i.mediaFiles[e]};i.selectMultiple&&i.setBulkSelectFirstIndex(e),se.Y.emit(ce.Mh,t),n("thumbnail-clicked",t)},onThumbnailShiftClicked:function(e){var t={index:e,file:i.mediaFiles[e]};i.selectMultiple&&i.bulkMediaSelect(e),se.Y.emit(ce.hP,t),n("thumbnail-shift-clicked",t)},endOfListVisibilityChanged:function(e){u.value=e,0!==i.mediaFiles.length&&u.value&&!c&&d()},isMediaFileSelected:function(e){return s?r.isMediaFileDisplayed(e):i.isMediaFileSelected(e)}}}}),me=(0,x.Z)(fe,[["render",function(e,t,n,i,r,a){var o=(0,l.resolveDirective)("observe-visibility");return(0,l.openBlock)(),(0,l.createElementBlock)("div",ne,[(0,l.createElementVNode)("div",ie,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.mediaFiles,(function(t,n){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{key:t.id,class:(0,l.normalizeClass)(["mediafile shadow-lg flex items-center",{selected:e.isMediaFileSelected(t)}]),onClick:[(0,l.withModifiers)((function(t){return e.onThumbnailClicked(n)}),["exact"]),(0,l.withModifiers)((function(t){return e.onThumbnailShiftClicked(n)}),["shift","exact"])]},[e.imageUrl(t)?((0,l.openBlock)(),(0,l.createElementBlock)("img",{key:0,src:e.imageUrl(t),alt:t.title},null,8,re)):((0,l.openBlock)(),(0,l.createElementBlock)("div",ae,oe))],10,le)})),128))]),(0,l.withDirectives)((0,l.createElementVNode)("div",null,null,512),[[o,e.endOfListVisibilityChanged]])],512)}],["__scopeId","data-v-76184012"]]);var pe={class:"flex items-center space-x-5 pb-3 h-8"},ve={class:"space-x-3",title:"Hold SHIFT to select a range of files"},he=(0,l.createElementVNode)("span",null,"Select multiple files",-1),ye=[(0,l.createElementVNode)("i",{class:"fa fa-trash"},null,-1),(0,l.createElementVNode)("span",{class:"hidden md:inline"},"Delete selected media",-1)],xe=[(0,l.createElementVNode)("i",{class:"fa fa-eraser"},null,-1),(0,l.createElementVNode)("span",{class:"hidden md:inline"},"Clear selection",-1)];function be(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ke(e,t,n,i,l,r,a){try{var o=e[r](a),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,l)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(i,l){var r=e.apply(t,n);function a(e){ke(r,i,l,a,o,"next",e)}function o(e){ke(r,i,l,a,o,"throw",e)}a(void 0)}))}}const Fe=(0,l.defineComponent)({name:"MediaThumbnailsSelectionBar",setup:function(){var e=W(),t=h(),n=(0,l.ref)(!1);function i(){return(i=we(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.deleteMediaFiles(be(e.selectedMediaFiles));case 3:e.clearMediaFilesSelection(),t.label="success",t.message="Media files removed successfully.",n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),t.label="error",t.message="Unable to remove media files.";case 12:t.visible=!0;case 13:case"end":return n.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}return(0,l.onMounted)((function(){n.value=e.selectMultiple})),(0,l.watch)(n,(function(){e.selectMultiple=n.value})),{checkbox:n,mediaFiles:(0,l.computed)((function(){return e.mediaFiles})),selectedMediaFiles:(0,l.computed)((function(){return e.selectedMediaFiles})),deleteSelection:function(){return i.apply(this,arguments)},clearMediaFilesSelection:e.clearMediaFilesSelection}}}),Me=(0,x.Z)(Fe,[["render",function(e,t,n,i,r,a){return(0,l.openBlock)(),(0,l.createElementBlock)("div",pe,[(0,l.createElementVNode)("label",ve,[(0,l.withDirectives)((0,l.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.checkbox=t}),type:"checkbox"},null,512),[[l.vModelCheckbox,e.checkbox]]),he]),e.selectedMediaFiles.length>0?((0,l.openBlock)(),(0,l.createElementBlock)("button",{key:0,class:"btn btn-color-red btn-size-xsmall space-x-3",type:"button",title:"Delete selected media",onClick:t[1]||(t[1]=function(){return e.deleteSelection&&e.deleteSelection.apply(e,arguments)})},ye)):(0,l.createCommentVNode)("",!0),e.selectedMediaFiles.length>0?((0,l.openBlock)(),(0,l.createElementBlock)("button",{key:1,class:"btn btn-color-white btn-style-outline btn-size-xsmall space-x-3",type:"button",title:"Clear selection",onClick:t[2]||(t[2]=function(){return e.clearMediaFilesSelection&&e.clearMediaFilesSelection.apply(e,arguments)})},xe)):(0,l.createCommentVNode)("",!0)])}]]);var Ee={class:"flex flex-col gap-3 mb-3"},Ve={class:"flex flex-col px-3 mt-2"},Be=(0,l.createElementVNode)("label",{class:"font-semibold text-quaternary",for:"settings_form_title"},"Title",-1),Ne={class:"flex flex-col px-3 mt-2"},Se=(0,l.createElementVNode)("label",{class:"font-semibold text-quaternary",for:"settings_form_caption"},"Caption",-1),Ce={class:"flex flex-col px-3 mt-2"},Ue=(0,l.createElementVNode)("label",{class:"font-semibold text-quaternary",for:"settings_form_alt"},"Alternative text",-1),Ie={class:"flex flex-col px-3 mt-2"},_e=(0,l.createElementVNode)("label",{class:"font-semibold text-quaternary",for:"settings_form_content"},"Description",-1),Te={class:"flex flex-col px-3 mt-2"},Oe=(0,l.createElementVNode)("p",{class:"font-light text-lg"},"Media settings",-1),Ae={class:"flex flex-col px-3 mt-2"},je=(0,l.createElementVNode)("label",{class:"font-semibold text-quaternary",for:"settings_form_size"},"Size",-1),Pe=["value"],De={class:"flex flex-col px-3 mt-2"},Re=(0,l.createElementVNode)("label",{class:"font-semibold text-quaternary",for:"settings_form_alignment"},"Alignment",-1),ze=["value"],Le={class:"flex flex-col px-3 mt-2"},qe=(0,l.createElementVNode)("label",{class:"font-semibold text-quaternary",for:"settings_form_link"},"Link",-1),Ze=["value"],Ye={key:0,class:"flex flex-col px-3 mt-2"},Qe=(0,l.createElementVNode)("label",{class:"font-semibold text-quaternary",for:"settings_form_link_url"},"Link URL",-1);n(7941);var $e=n(8624);function Ge(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return He(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const We=(0,l.defineComponent)({name:"MediaFileSettings",setup:function(){var e=W(),t=K(),n=(0,l.computed)((function(){return e.mediaFiles[t.displayIndex]})),i=(0,l.reactive)({size:"medium",alignment:"center",link:"media",linkUrl:""}),r=(0,l.computed)((function(){return[{label:"Original size - ".concat(n.value.width," x ").concat(n.value.height),value:"original"}].concat(Ge(Object.keys(n.value.sizes).map((function(e){return{label:"".concat((0,$e.I)(e)," - ").concat(n.value.sizes[e].width," x ").concat(n.value.sizes[e].height),value:e}}))))}));return(0,l.onMounted)((function(){t.settings=i})),(0,l.watch)(i,(function(){t.settings=i}),{deep:!0}),{mediaFile:n,settings:i,alignmentOptions:[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"},{label:"None",value:"none"}],linkOptions:[{label:"None",value:"none"},{label:"Media",value:"media"},{label:"Media page",value:"page"},{label:"Custom URL",value:"custom"}],fileSizesOptions:r}}}),Ke=(0,x.Z)(We,[["render",function(e,t,n,i,r,a){return(0,l.openBlock)(),(0,l.createElementBlock)("div",Ee,[(0,l.createElementVNode)("div",null,[(0,l.createElementVNode)("div",Ve,[Be,(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"settings_form_title","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.mediaFile.title=t}),type:"text"},null,512),[[l.vModelText,e.mediaFile.title]])]),(0,l.createElementVNode)("div",Ne,[Se,(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"settings_form_caption","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.mediaFile.caption=t}),type:"text"},null,512),[[l.vModelText,e.mediaFile.caption]])]),(0,l.createElementVNode)("div",Ce,[Ue,(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"settings_form_alt","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.mediaFile.alternativeText=t}),type:"text"},null,512),[[l.vModelText,e.mediaFile.alternativeText]])]),(0,l.createElementVNode)("div",Ie,[_e,(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"settings_form_content","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.mediaFile.content=t}),type:"text"},null,512),[[l.vModelText,e.mediaFile.content]])])]),(0,l.createElementVNode)("div",Te,[Oe,(0,l.createElementVNode)("div",Ae,[je,(0,l.withDirectives)((0,l.createElementVNode)("select",{id:"settings_form_size","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.settings.size=t})},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.fileSizesOptions,(function(e){return(0,l.openBlock)(),(0,l.createElementBlock)("option",{key:e.value,value:e.value},(0,l.toDisplayString)(e.label),9,Pe)})),128))],512),[[l.vModelSelect,e.settings.size]])]),(0,l.createElementVNode)("div",De,[Re,(0,l.withDirectives)((0,l.createElementVNode)("select",{id:"settings_form_alignment","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.settings.alignment=t})},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.alignmentOptions,(function(e){return(0,l.openBlock)(),(0,l.createElementBlock)("option",{key:e.value,value:e.value},(0,l.toDisplayString)(e.label),9,ze)})),128))],512),[[l.vModelSelect,e.settings.alignment]])]),(0,l.createElementVNode)("div",Le,[qe,(0,l.withDirectives)((0,l.createElementVNode)("select",{id:"settings_form_link","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.settings.link=t})},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.linkOptions,(function(e){return(0,l.openBlock)(),(0,l.createElementBlock)("option",{key:e.value,value:e.value},(0,l.toDisplayString)(e.label),9,Ze)})),128))],512),[[l.vModelSelect,e.settings.link]])]),"custom"===e.settings.link?((0,l.openBlock)(),(0,l.createElementBlock)("div",Ye,[Qe,(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"settings_form_link_url","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.settings.linkUrl=t}),type:"text"},null,512),[[l.vModelText,e.settings.linkUrl]])])):(0,l.createCommentVNode)("",!0)])])}]]),Je=(0,l.defineComponent)({name:"MediaBrowser",components:{MediaFileProperties:X,MediaFileSettings:Ke,MediaThumbnailsSelectionBar:Me,MediaThumbnailsList:me,MediaViewer:te,FlashBar:b},props:{getUrl:{type:String,required:!0},deleteUrl:{type:String,required:!0},mode:{type:String,required:!0}},setup:function(e){var t=W(),n=K();return t.setup({getUrl:e.getUrl,deleteUrl:e.deleteUrl}),(0,l.onMounted)((function(){se.Y.on(ce.n9,(function(e){n.callback=e})),se.Y.on(ce.gN,(function(e){n.callback=e}))})),{mediaFiles:(0,l.computed)((function(){return t.mediaFiles})),mediaFilesFilter:(0,l.computed)((function(){return t.filter})),selectedMediaFiles:(0,l.computed)((function(){return t.selectedMediaFiles})),displayIndex:(0,l.computed)((function(){return n.displayIndex})),onExtendedModeThumbnailClicked:function(e){var i=e.index;t.selectMultiple||(n.displayIndex=i,n.show=!0)},onMininmalModeThumbnailClicked:function(e){var t=e.index;n.displayIndex=t},clearMediaFilesSelection:t.clearMediaFilesSelection,selectFile:function(){n.callback&&n.callback({files:[t.mediaFiles[n.displayIndex]],settings:n.settings}),n.show=!1,se.Y.emit(ce.mG,{modalId:"media_library"})}}}}),Xe=(0,x.Z)(Je,[["render",function(e,t,n,i,r,a){var f=(0,l.resolveComponent)("FlashBar"),m=(0,l.resolveComponent)("MediaThumbnailsSelectionBar"),p=(0,l.resolveComponent)("MediaThumbnailsList"),v=(0,l.resolveComponent)("MediaViewer"),h=(0,l.resolveComponent)("MediaFileProperties"),y=(0,l.resolveComponent)("MediaFileSettings");return"extended"===e.mode?((0,l.openBlock)(),(0,l.createElementBlock)("div",o,[(0,l.createVNode)(f,{class:"sticky top-ui-area"}),(0,l.createElementVNode)("div",c,[(0,l.createVNode)(m),(0,l.createVNode)(p,{onThumbnailClicked:e.onExtendedModeThumbnailClicked},null,8,["onThumbnailClicked"])]),(0,l.createVNode)(v)])):((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:1,class:(0,l.normalizeClass)([{"grid grid-cols-4":-1!==e.displayIndex},"flex h-full"])},[(0,l.createVNode)(p,{class:(0,l.normalizeClass)([{"col-span-3":-1!==e.displayIndex},"p-1 overflow-y-auto"]),onThumbnailClicked:e.onMininmalModeThumbnailClicked},null,8,["class","onThumbnailClicked"]),-1!==e.displayIndex?((0,l.openBlock)(),(0,l.createElementBlock)("div",s,[(0,l.createElementVNode)("div",u,[(0,l.createVNode)(h,{"show-thumbnail":""}),(0,l.createVNode)(y)]),(0,l.createElementVNode)("div",d,[(0,l.createElementVNode)("button",{class:"btn btn-color-primary",onClick:t[0]||(t[0]=function(){return e.selectFile&&e.selectFile.apply(e,arguments)})},"Select file")])])):(0,l.createCommentVNode)("",!0)],2))}]]);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function it(e,t){return it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},it(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=at(e);if(t){var l=at(this).constructor;n=Reflect.construct(i,arguments,l)}else n=i.apply(this,arguments);return rt(this,n)}}function rt(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(c,e);var t,n,i,o=lt(c);function c(){return tt(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"connect",value:function(){(0,l.createApp)(Xe,{getUrl:this.getUrlValue,deleteUrl:this.deleteUrlValue,mode:this.modeValue}).use((0,r.WB)()).directive("observe-visibility",{beforeMount:function(e,t,n){n.context=t.instance,a.Sq.bind(e,t,n)},updated:a.Sq.update,unmounted:a.Sq.unbind}).mount("#media-browser")}}])&&nt(t.prototype,n),i&&nt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.Qr);ot.values={getUrl:String,deleteUrl:String,mode:String}},5042:()=>{}}]);