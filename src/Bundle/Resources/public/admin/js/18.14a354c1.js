(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"44f9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-toolbar",{staticClass:"bg-grey-3 text-primary q-pl-none q-pr-xs",staticStyle:{"padding-top":"42px"}},[a("q-space"),a("q-input",{staticClass:"q-mb-xs",attrs:{dense:"",label:"Filter"},scopedSlots:e._u([{key:"append",fn:function(){return[""===e.filter?a("q-icon",{attrs:{name:"search"}}):a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:function(t){e.filter=""}}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("q-table",{attrs:{flat:"","binary-state-sort":"",data:e.users,columns:e.columns,"row-key":"id",pagination:e.pagination,loading:e.isUserLoading,selection:"multiple",selected:e.selected,"selected-rows-label":e.getSelectedString},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest,"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"body-cell",fn:function(t){return[a("q-td",{staticClass:"vertical-top",staticStyle:{"padding-bottom":"0"}},[e._v("\n                "+e._s(t.value)+"\n            ")])]}},{key:"body-cell-username",fn:function(t){return[a("q-td",{staticClass:"vertical-top",staticStyle:{"padding-bottom":"0"},attrs:{props:t},nativeOn:{mouseover:function(a){e.showDetails=t.row.id},mouseleave:function(t){e.showDetails=null}}},[a("div",{staticClass:"col"},[a("router-link",{staticClass:"text-weight-medium",attrs:{to:{name:"user_edit",params:{id:t.row.id}}}},[e._v(e._s(t.value))])],1),a("div",{staticClass:"row q-gutter-x-sm",class:{invisible:e.showDetails!==t.row.id}},[a("router-link",{attrs:{to:{name:"user_edit",params:{id:t.row.id}}}},[e._v("Edit")]),a("div",{staticClass:"cursor-pointer text-negative",on:{click:function(a){return e.singleDelete(t.row)}}},[e._v("Delete")]),a("a",{attrs:{href:t.row.publicUrl,target:"_blank"}},[e._v("View")])],1)])]}},{key:"pagination",fn:function(t){return[a("div",{staticClass:"q-px-md"},[e._v("\n                "+e._s(1+(t.pagination.page-1)*t.pagination.rowsPerPage)+"-"+e._s(Math.min(t.pagination.page*t.pagination.rowsPerPage,e.usersCount))+" of "+e._s(e.usersCount)+"\n            ")]),t.pagesNumber>2?a("q-btn",{attrs:{icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:t.isFirstPage},on:{click:t.firstPage}}):e._e(),a("q-btn",{attrs:{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:t.isFirstPage},on:{click:t.prevPage}}),a("q-pagination",{attrs:{color:"grey-8",max:t.pagesNumber,size:"sm"},on:{input:e.fetch},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}}),a("q-btn",{attrs:{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:t.isLastPage},on:{click:t.nextPage}}),t.pagesNumber>2?a("q-btn",{attrs:{icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:t.isLastPage},on:{click:t.lastPage}}):e._e()]}}])}),a("div",{staticClass:"q-pa-md q-gutter-md"},[e.selected.length>0?a("q-btn",{attrs:{color:"negative",label:"Delete"},on:{click:function(t){e.confirmDelete=!0}}}):e._e()],1),a("DeleteUserConfirm",{attrs:{selected:e.selected},on:{done:e.onDeleteDone,close:function(t){e.confirmDelete=!1}},model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}}),a("q-page-sticky",{attrs:{expand:"",position:"top"}},[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",[e._v("\n                Users\n            ")])],1)],1)],1)},s=[],i=a("8cfb"),o=a("60a3"),l=a("4bb5"),r=function(e,t,a,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(i<3?s(o):i>3?s(t,a,o):s(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},c=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const d=Object(l["a"])("User");let p=class extends o["d"]{constructor(){super(...arguments),this.filter="",this.selected=[],this.showDetails=null,this.confirmDelete=!1,this.pagination={sortBy:"username",descending:!1,page:1,rowsPerPage:10,rowsNumber:this.usersCount},this.columns=[{name:"username",label:"Username",align:"left",field:"username",sortable:!0},{name:"name",label:"Name",align:"left",field:e=>this.getUserRealName(e)},{name:"email",label:"Email",align:"left",field:"email",sortable:!0},{name:"roles",label:"Roles",align:"left",field:e=>{var t;return null===(t=e.userRoles)||void 0===t?void 0:t.map((e=>e.name)).join(", ")}},{name:"posts",label:"Posts",align:"left",field:"postsCount"}]}created(){this.fetch()}fetch(){this.onRequest({pagination:this.pagination,filter:this.filter})}async onRequest(e){const{page:t,rowsPerPage:a,sortBy:n,descending:s}=e.pagination,i=0===a?"":a,o=(t-1)*a,l=this.filter;await this.fetchPage({startRow:o,fetchCount:i,filter:l,sortBy:n,descending:s}),this.pagination.page=t,this.pagination.rowsPerPage=a,this.pagination.sortBy=n,this.pagination.descending=s,this.pagination.rowsNumber=this.usersCount}getSelectedString(){return 0===this.selected.length?"":`${this.selected.length} user${this.selected.length>1?"s":""} selected of ${this.users.length}`}getUserRealName(e){var t,a;const n=`${null!==(t=e.firstName)&&void 0!==t?t:""} ${null!==(a=e.lastName)&&void 0!==a?a:""}`.trim();return null!==n&&void 0!==n?n:"â€”"}onDeleteDone(){this.confirmDelete=!1,this.selected=[],this.fetch()}singleDelete(e){this.selected=[e],this.confirmDelete=!0}};r([d.State,c("design:type",Array)],p.prototype,"users",void 0),r([d.State,c("design:type",Number)],p.prototype,"usersCount",void 0),r([d.State,c("design:type",Number)],p.prototype,"pagesCount",void 0),r([d.State,c("design:type",Object)],p.prototype,"isUserLoading",void 0),r([d.Action,c("design:type",Object)],p.prototype,"fetchPage",void 0),r([Object(o["e"])("filter"),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"fetch",null),p=r([Object(o["a"])({components:{DeleteUserConfirm:i["a"]}})],p);var u=p,g=u,f=a("2877"),m=a("9989"),b=a("65c6"),h=a("2c91"),y=a("27f9"),v=a("0016"),w=a("eaac"),q=a("db86"),P=a("9c40"),_=a("3b16"),D=a("de5e"),k=a("6ac5"),C=a("eebe"),x=a.n(C),S=Object(f["a"])(g,n,s,!1,null,null,null);t["default"]=S.exports;x()(S,"components",{QPage:m["a"],QToolbar:b["a"],QSpace:h["a"],QInput:y["a"],QIcon:v["a"],QTable:w["a"],QTd:q["a"],QBtn:P["a"],QPagination:_["a"],QPageSticky:D["a"],QToolbarTitle:k["a"]})}}]);