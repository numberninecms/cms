(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{c167:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("q-splitter",{staticClass:"full-height",scopedSlots:e._u([{key:"before",fn:function(){return[i("q-resize-observer",{attrs:{debounce:"0"},on:{resize:e.onSplitterChanged}}),e.currentEntity?i("DynamicFrame",{attrs:{id:"page-builder-content-frame",height:e.frameHeight,src:e.url,loading:e.isLoading,"disable-links":""},on:{loaded:e.onLoaded}}):e._e()]},proxy:!0},{key:"after",fn:function(){return[i("PageBuilderSidebar",{attrs:{height:e.frameHeight,"has-classic-editor":!0},on:{"open-classic-editor":function(t){return e.openClassicEditor()}}})]},proxy:!0}]),model:{value:e.splitter,callback:function(t){e.splitter=t},expression:"splitter"}}),i("MediaLibraryDialog")],1)},o=[],r=i("c5f3"),s=i("1b40"),a=i("4bb5"),c=i("a645"),d=i("325d"),p=i("7905"),l=i("c909"),y=i.n(l),h=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},u=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const f=Object(a["a"])("PageBuilder"),g=Object(a["a"])("ContentType");let b=class extends s["d"]{constructor(){super(...arguments),this.frameHeight=0,this.splitter=70}created(){p["a"].on("ContentType:loaded",(()=>{this.fetchContent()})),this.contentTypes.length>0&&this.fetchContent(),window.addEventListener("resize",(()=>this.onResize(document.documentElement.clientHeight))),this.onResize(document.documentElement.clientHeight)}async fetchContent(){if(this.id)await this.fetchEntity({type:this.type,id:this.id}),await this.fetchComponentsForCurrentEntity();else{const e=await this.fetchNewEntity({type:this.type});await this.$router.push({name:this.type+"_edit",params:{id:e.id,type:this.type}})}}onResize(e){this.frameHeight=e,this.$forceUpdate()}onLoaded(){this.stopLoading(),p["a"].emit("Frame:loaded")}onSplitterChanged({width:e}){e>1280?this.setViewSize("lg"):e>768?this.setViewSize("md"):this.setViewSize("sm"),p["a"].emit("Frame:resize"),p["a"].emit("Frame:auto-view-size")}openClassicEditor(){this.$router.push({name:this.type+"_edit_classic",params:{id:this.id.toString(),type:this.type}})}get url(){return this.currentEntity?new y.a(this.currentEntity.publicUrl).addQuery("n9","admin").toString():""}};h([f.Action,u("design:type",Object)],b.prototype,"setDragId",void 0),h([f.Action,u("design:type",Object)],b.prototype,"fetchEntity",void 0),h([f.Action,u("design:type",Object)],b.prototype,"fetchNewEntity",void 0),h([f.Action,u("design:type",Object)],b.prototype,"fetchComponentsForCurrentEntity",void 0),h([f.Action,u("design:type",Object)],b.prototype,"stopLoading",void 0),h([f.Action,u("design:type",Object)],b.prototype,"setViewSize",void 0),h([f.State,u("design:type",Object)],b.prototype,"currentEntity",void 0),h([f.State,u("design:type",Object)],b.prototype,"isLoading",void 0),h([g.State,u("design:type",Object)],b.prototype,"contentTypes",void 0),h([Object(s["b"])(),u("design:type",Number)],b.prototype,"id",void 0),h([Object(s["b"])(),u("design:type",String)],b.prototype,"type",void 0),b=h([Object(s["a"])({components:{DynamicFrame:c["a"],PageBuilderSidebar:d["a"],MediaLibraryDialog:r["a"]}})],b);var m=b,w=m,v=i("2877"),j=i("9989"),O=i("8562"),E=i("3980"),S=i("eebe"),C=i.n(S),z=Object(v["a"])(w,n,o,!1,null,null,null);t["default"]=z.exports;C()(z,"components",{QPage:j["a"],QSplitter:O["a"],QResizeObserver:E["a"]})}}]);