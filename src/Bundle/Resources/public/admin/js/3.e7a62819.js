(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{c167:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[i("q-splitter",{staticClass:"full-height",scopedSlots:t._u([{key:"before",fn:function(){return[i("q-resize-observer",{attrs:{debounce:"0"},on:{resize:t.onSplitterChanged}}),!t.isOptionPage&&t.currentEntity?i("DynamicFrame",{attrs:{id:"page-builder-content-frame",height:t.frameHeight,src:t.url,loading:t.isLoading,"disable-links":""},on:{loaded:t.onLoaded}}):t._e()]},proxy:!0},{key:"after",fn:function(){return[i("PageBuilderSidebar",{attrs:{"has-options":!t.isOptionPage},on:{"open-page-options":function(e){return t.editContentOptions()}}})]},proxy:!0}]),model:{value:t.splitter,callback:function(e){t.splitter=e},expression:"splitter"}}),i("MediaLibraryDialog")],1)},o=[],r=i("c5f3"),s=i("60a3"),a=i("4bb5"),p=i("a645"),c=i("325d"),d=i("7905"),y=i("c909"),l=i.n(y),h=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},u=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const g=Object(a["a"])("PageBuilder"),f=Object(a["a"])("ContentType");let b=class extends s["d"]{constructor(){super(...arguments),this.frameHeight=0,this.splitter=70}created(){d["a"].on("ContentType:loaded",(()=>{this.fetchContent()})),this.contentTypes.length>0&&this.fetchContent(),window.addEventListener("resize",(()=>this.onResize(document.documentElement.clientHeight))),this.onResize(document.documentElement.clientHeight)}async fetchContent(){if(this.id)await this.fetchEntity({type:this.type,id:this.id}),await this.fetchComponentsForCurrentEntity();else{const t=await this.fetchNewEntity({type:this.type});await this.$router.push({name:this.type+"_edit",params:{id:t.id,type:this.type}})}}onResize(t){this.frameHeight=t,this.$forceUpdate()}onLoaded(){this.stopLoading(),d["a"].emit("Frame:loaded")}onSplitterChanged({width:t}){t>1280?this.setViewSize("lg"):t>768?this.setViewSize("md"):this.setViewSize("sm"),d["a"].emit("Frame:resize"),d["a"].emit("Frame:auto-view-size")}editContentOptions(){this.$router.push({name:this.type+"_edit_classic",params:{id:this.id.toString(),type:this.type}})}get url(){return this.currentEntity?new l.a(this.currentEntity.publicUrl).addQuery("n9","admin").toString():""}get isOptionPage(){return this.$route.name===this.type+"_edit_classic"}};h([g.Action,u("design:type",Object)],b.prototype,"setDragId",void 0),h([g.Action,u("design:type",Object)],b.prototype,"fetchEntity",void 0),h([g.Action,u("design:type",Object)],b.prototype,"fetchNewEntity",void 0),h([g.Action,u("design:type",Object)],b.prototype,"fetchComponentsForCurrentEntity",void 0),h([g.Action,u("design:type",Object)],b.prototype,"stopLoading",void 0),h([g.Action,u("design:type",Object)],b.prototype,"setViewSize",void 0),h([g.State,u("design:type",Object)],b.prototype,"currentEntity",void 0),h([g.State,u("design:type",Object)],b.prototype,"isLoading",void 0),h([f.State,u("design:type",Object)],b.prototype,"contentTypes",void 0),h([Object(s["b"])(),u("design:type",Number)],b.prototype,"id",void 0),h([Object(s["b"])(),u("design:type",String)],b.prototype,"type",void 0),b=h([Object(s["a"])({components:{DynamicFrame:p["a"],PageBuilderSidebar:c["a"],MediaLibraryDialog:r["a"]}})],b);var m=b,O=m,w=i("2877"),v=i("9989"),j=i("8562"),S=i("3980"),C=i("eebe"),E=i.n(C),z=Object(w["a"])(O,n,o,!1,null,null,null);e["default"]=z.exports;E()(z,"components",{QPage:v["a"],QSplitter:j["a"],QResizeObserver:S["a"]})}}]);