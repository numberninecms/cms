(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{c587:function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("div",{staticStyle:{"padding-top":"42px"}},[e.model?i("div",{staticClass:"row q-pa-md q-gutter-x-md"},[i("div",{staticClass:"col-12 col-md-9"},[i("q-card",{attrs:{flat:""}},[i("q-tabs",{staticClass:"text-primary shadow-2",attrs:{align:"left",dense:"","inline-label":"","active-color":"primary","indicator-color":"primary"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.visibleTabs,(function(t){return i("q-tab",{key:t.name,attrs:{name:t.name,icon:t.icon,label:e.$q.screen.gt.xs?t.label:""}})})),1),i("q-separator"),i("q-tab-panels",{attrs:{"keep-alive":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return i("q-tab-panel",{key:t.name,attrs:{name:t.name}},[i(t.panel.component,e._g(e._b({tag:"component",model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"component",t.panel.props,!1),Object.assign({},{save:e.save,reload:e.reload},t.panel.events)))],1)})),1)],1)],1),i("div",{staticClass:"col q-gutter-y-md"},e._l(e.visibleSidebarComponents,(function(t){return i(t.component,e._g(e._b({key:t.id?t.id:t.component,tag:"component",attrs:{"delete-action":e.deleteAction},on:{"update:deleteAction":function(t){e.deleteAction=t},"update:delete-action":function(t){e.deleteAction=t}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"component",Object.assign({},{originalEntity:e.originalEntity,saveLoading:e.saveLoading},t.props),!1),Object.assign({},{save:e.save,reload:e.reload},t.events)))})),1)]):e._e()]),i("q-dialog",{attrs:{persistent:""},model:{value:e.deleteAction,callback:function(t){e.deleteAction=t},expression:"deleteAction"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("q-avatar",{attrs:{icon:"delete_forever",color:"negative","text-color":"white"}}),i("span",{staticClass:"q-ml-sm"},[e._v("Do you want to delete this "+e._s(e.typeName)+"?")])],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"No",color:"secondary"},on:{click:function(t){e.deleteAction=!1}}}),i("q-btn",{attrs:{flat:"",label:"Yes",color:"primary",autofocus:"",loading:e.deleteLoading},on:{click:e.confirmDelete,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmDelete(t)}}})],1)],1)],1),i("MediaLibraryDialog"),i("q-page-sticky",{staticStyle:{"z-index":"10"},attrs:{expand:"",position:"top"}},[i("q-toolbar",{staticClass:"bg-primary text-white"},[e.id&&e.model?i("q-toolbar-title",[e._v(e._s(e.model.title))]):i("q-toolbar-title",[e._v("Loading...")]),e.model?i("q-btn",{attrs:{flat:"",dense:"",color:"white",icon:"mdi-eye-outline",href:e.model.publicUrl,type:"a",target:"_blank"}},[i("q-tooltip",[e._v("View")])],1):e._e()],1)],1)],1)},s=[],a=i("84f8"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column q-gutter-y-md"},[i("q-input",{attrs:{filled:"",label:"Title"},model:{value:e.value.title,callback:function(t){e.$set(e.value,"title",t)},expression:"value.title"}}),i("div",{staticClass:"row q-gutter-x-md items-center"},[i("div",[i("a",{attrs:{href:"#"}},[e._v(e._s(e.rootAbsoluteUrl)+e._s(e.pagePermalink))]),i("q-popup-edit",{attrs:{title:"Permalink",buttons:"","label-set":"OK"},on:{save:e.validateSlug},model:{value:e.value.slug,callback:function(t){e.$set(e.value,"slug",t)},expression:"value.slug"}},[i("q-input",{attrs:{dense:"",autofocus:"",filled:"","stack-label":"",clearable:"",placeholder:e.slugifiedTitle},model:{value:e.value.slug,callback:function(t){e.$set(e.value,"slug",t)},expression:"value.slug"}})],1)],1)]),i("p",{staticClass:"text-bold text-body1 q-mb-none"},[e._v("Content")]),i("TinyEditor",{model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}})],1)},r=[],c=i("1b40"),d=i("583e"),u=i("bd7a"),p=i("4bb5"),f=i("ff94"),m=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},v=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const y=Object(p["a"])("Setting");let b=class extends c["d"]{created(){var e;this.querySettings(),this.value.excerpt=null!==(e=this.value.excerpt)&&void 0!==e?e:""}validateSlug(e){e||(this.value.slug=this.slugifiedTitle)}get rootAbsoluteUrl(){return this.getSettingValue("root_absolute_url")}get pagePermalink(){var e;return this.getSettingValue("permalinks")?null===(e=this.getSettingValue("permalinks")[this.value.type])||void 0===e?void 0:e.replace(/^\//,"").replace("{slug}",this.value.slug):void 0}get slugifiedTitle(){return f["a"](this.value.title)}};m([y.State,v("design:type",Object)],b.prototype,"settings",void 0),m([y.Action,v("design:type",Object)],b.prototype,"querySettings",void 0),m([y.Getter,v("design:type",Object)],b.prototype,"getSettingValue",void 0),m([Object(c["b"])(),v("design:type","function"===typeof(n="undefined"!==typeof d["default"]&&d["default"])?n:Object)],b.prototype,"value",void 0),b=m([Object(c["a"])({components:{TinyEditor:u["a"]}})],b);var h=b,g=h,C=i("2877"),x=i("27f9"),O=i("42a1"),j=i("eebe"),R=i.n(j),q=Object(C["a"])(g,l,r,!1,null,null,null),T=q.exports;R()(q,"components",{QInput:x["a"],QPopupEdit:O["a"]});var F,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.filteredCustomFields,(function(t){return i("div",{key:t.id,staticClass:"row q-col-gutter-md q-gutter-y-md items-start"},[i("q-select",{staticClass:"col-12 col-sm-6",attrs:{filled:"","use-input":"","fill-input":"","input-debounce":"0","hide-selected":"",label:"Name",options:e.existingCustomFieldsOptions,value:t.key},on:{filter:e.customFieldAutocomplete,"input-value":function(i){return e.value.setCustomFieldKey(t,i)}}}),i("q-input",{staticClass:"col-12 col-sm-6",attrs:{value:t.value,label:"Value",filled:"",autogrow:""},on:{input:function(i){return e.value.setCustomFieldValue(t,i)}},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-delete"},on:{click:function(i){return e.value.deleteCustomField(t)}}})]},proxy:!0}],null,!0)})],1)})),0)},E=[],_=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},k=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const w=Object(p["a"])("Content");let P=class extends c["d"]{constructor(){super(...arguments),this.existingCustomFieldsOptions=null}created(){var e;this.fetchExistingCustomFields().then((()=>this.existingCustomFieldsOptions=Object.values(this.existingCustomFields))),this.value.customFields=Object.assign({},null!==(e=this.value.customFields)&&void 0!==e?e:{})}customFieldAutocomplete(e,t){t((()=>{const t=e.toLocaleLowerCase();this.existingCustomFieldsOptions=Object.values(this.existingCustomFields).filter((e=>e.toLocaleLowerCase().includes(t)))}))}get filteredCustomFields(){return this.value.customFieldsComputed.filter((e=>!e.key.startsWith("extension.")))}};_([w.State,k("design:type",Object)],P.prototype,"existingCustomFields",void 0),_([w.Action,k("design:type",Object)],P.prototype,"fetchExistingCustomFields",void 0),_([Object(c["b"])(),k("design:type","function"===typeof(F="undefined"!==typeof d["default"]&&d["default"])?F:Object)],P.prototype,"value",void 0),P=_([c["a"]],P);var Q=P,A=Q,D=i("ddd8"),$=i("9c40"),V=Object(C["a"])(A,S,E,!1,null,null,null),B=V.exports;R()(V,"components",{QSelect:D["a"],QInput:x["a"],QBtn:$["a"]});var L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.revisions.length>1?i("div",[i("div",{staticClass:"row q-gutter-x-xl items-center"},[i("q-slider",{staticClass:"col q-mt-lg",attrs:{color:"primary",markers:"",snap:"",label:"","label-always":"","label-value":e.currentRevisionDate,min:0,step:1,max:e.revisions.length-1},model:{value:e.currentRevisionStep,callback:function(t){e.currentRevisionStep=t},expression:"currentRevisionStep"}}),i("q-btn",{staticClass:"col-auto",attrs:{color:"primary",label:"Revert",disable:e.currentRevisionVersion===e.revisions[0].version},on:{click:function(t){e.confirmRevert=!0}}})],1),i("RevisionFieldDiff",{attrs:{title:"Title",field:"title",version:e.currentRevisionVersion,revisions:e.revisions}}),i("RevisionFieldDiff",{attrs:{title:"Slug",field:"slug",version:e.currentRevisionVersion,revisions:e.revisions}}),i("RevisionFieldDiff",{attrs:{title:"Excerpt",field:"excerpt",version:e.currentRevisionVersion,revisions:e.revisions}}),i("RevisionFieldDiff",{attrs:{title:"Content",field:"content",version:e.currentRevisionVersion,revisions:e.revisions}}),i("q-dialog",{attrs:{value:e.confirmRevert}},[i("q-card",{attrs:{f:""}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.currentRevisionDate)+" version")]),i("q-separator")],1),i("q-card-section",{staticClass:"row items-center"},[i("q-avatar",{attrs:{icon:"mdi-alert-remove",color:"warning","text-color":"white"}}),i("span",{staticClass:"q-ml-sm text-subtitle1"},[e._v("Do you want to revert this "+e._s(e.value.type)+"?")])],1),i("q-card-section",[i("span",[e._v("All revisions past "),i("q-badge",{attrs:{label:e.currentRevisionDate,color:"warning"}}),e._v(" will be permanently deleted.")],1)]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"No",color:"secondary"},on:{click:function(t){e.confirmRevert=!1}}}),i("q-btn",{attrs:{flat:"",loading:e.revertLoading,label:"Yes",color:"primary",autofocus:""},on:{click:e.confirmRevertAction,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmRevertAction(t)}}})],1)],1)],1)],1):e._e()},N=[],I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hasFieldValueSinceVersion(e.field,e.version)?i("div",[i("p",{staticClass:"text-h6 q-ma-none"},[e._v(e._s(e.title))]),e.previous!==e.current?i("code-diff",{staticClass:"q-ma-none full-width",attrs:{"old-string":e.previous,"new-string":e.current}}):i("p",{domProps:{innerHTML:e._s(e.current)}})],1):e._e()},M=[],H=i("4eff"),K=i.n(H),U=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},G=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Y=class extends c["d"]{get previous(){return this.getFieldForVersion(this.field,this.version-1)}get current(){return this.getFieldForVersion(this.field,this.version)}getFieldForVersion(e,t){var i;if(t<=0)return"";const n=this.revisions.slice(this.revisions.findIndex((e=>e.version===t)));let o=null!==(i=n[0][e])&&void 0!==i?i:null;if(o)return`${o}\n`;for(let s=1;s<n.length;s++)if(n[s][e])return`${n[s][e]}\n`;return""}hasFieldValueSinceVersion(e,t){const i=this.revisions.slice(this.revisions.findIndex((e=>e.version===t)));for(const n of i)if(n[e])return!0;return!1}};U([Object(c["b"])({type:String}),G("design:type",String)],Y.prototype,"title",void 0),U([Object(c["b"])({type:String}),G("design:type",String)],Y.prototype,"field",void 0),U([Object(c["b"])(),G("design:type",Number)],Y.prototype,"version",void 0),U([Object(c["b"])(),G("design:type",Array)],Y.prototype,"revisions",void 0),Y=U([Object(c["a"])({components:{CodeDiff:K.a}})],Y);var J,z=Y,W=z,X=Object(C["a"])(W,I,M,!1,null,null,null),Z=X.exports,ee=i("b9b9"),te=i.n(ee),ie=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},ne=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const oe=Object(p["a"])("Content");let se=class extends c["d"]{constructor(){super(...arguments),this.currentRevisionStep=0,this.confirmRevert=!1,this.revertLoading=!1}activated(){this.currentRevisionStep=this.revisions.length-1}get revisions(){var e;return this.contentEntitiesRevisions.hasOwnProperty(this.value.type)&&this.contentEntitiesRevisions[this.value.type].hasOwnProperty(this.value.id.toString())&&null!==(e=this.contentEntitiesRevisions[this.value.type][this.value.id.toString()])&&void 0!==e?e:[]}get currentRevisionDate(){var e;const t=null===(e=this.revisions.find((e=>e.version===this.currentRevisionVersion)))||void 0===e?void 0:e.date;return t?te()(t,"mmmm d, yyyy HH:MM"):this.currentRevisionVersion.toString()}get currentRevisionVersion(){return this.currentRevisionStep>this.revisions.length-1?0:this.revisions[this.revisions.length-this.currentRevisionStep-1].version}async confirmRevertAction(){await this.revertEntity({entity:this.value,version:this.currentRevisionVersion}),this.$emit("reload"),this.confirmRevert=!1}};ie([oe.State,ne("design:type",Object)],se.prototype,"contentEntitiesRevisions",void 0),ie([oe.Action,ne("design:type",Object)],se.prototype,"revertEntity",void 0),ie([Object(c["b"])(),ne("design:type","function"===typeof(J="undefined"!==typeof d["default"]&&d["default"])?J:Object)],se.prototype,"value",void 0),se=ie([Object(c["a"])({components:{RevisionFieldDiff:Z}})],se);var ae=se,le=ae,re=i("c1d0"),ce=i("24e8"),de=i("f09f"),ue=i("a370"),pe=i("eb85"),fe=i("cb32"),me=i("58a81"),ve=i("4b7e"),ye=Object(C["a"])(le,L,N,!1,null,null,null),be=ye.exports;R()(ye,"components",{QSlider:re["a"],QBtn:$["a"],QDialog:ce["a"],QCard:de["a"],QCardSection:ue["a"],QSeparator:pe["a"],QAvatar:fe["a"],QBadge:me["a"],QCardActions:ve["a"]});var he,ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column q-gutter-y-md"},[i("q-input",{attrs:{filled:"",label:"SEO title",counter:"",placeholder:e.value.title,hint:"Keep it under 70 characters for best results"},model:{value:e.value.seoTitle,callback:function(t){e.$set(e.value,"seoTitle",t)},expression:"value.seoTitle"}}),i("q-input",{attrs:{filled:"",label:"Meta description",type:"textarea",autogrow:"",hint:"Maximum 157 characters",rules:[function(e){return e.length<=157||"Maximum 157 characters"}],counter:""},model:{value:e.value.seoDescription,callback:function(t){e.$set(e.value,"seoDescription",t)},expression:"value.seoDescription"}})],1)},Ce=[],xe=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Oe=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let je=class extends c["d"]{};xe([Object(c["b"])(),Oe("design:type","function"===typeof(he="undefined"!==typeof d["default"]&&d["default"])?he:Object)],je.prototype,"value",void 0),je=xe([c["a"]],je);var Re=je,qe=Re,Te=Object(C["a"])(qe,ge,Ce,!1,null,null,null),Fe=Te.exports;R()(Te,"components",{QInput:x["a"]});var Se,Ee,_e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column q-gutter-y-md"},e._l(e.extension.controls,(function(t,n){return i(e.formControlName(t.name),{key:n,tag:"component",staticClass:"q-mb-md",attrs:{value:e.fieldValue(n,t.parameters.default),parameters:t.parameters},on:{input:function(t){return e.updateValue(n,t)}}})})),1)},ke=[],we=i("ce24"),Pe=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Qe=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const Ae=Object(p["a"])("Content");let De=class extends c["d"]{constructor(){super(...arguments),this.existingCustomFieldsOptions=null}created(){var e;this.fetchExistingCustomFields().then((()=>this.existingCustomFieldsOptions=Object.values(this.existingCustomFields))),this.value.customFields=Object.assign({},null!==(e=this.value.customFields)&&void 0!==e?e:{})}formControlName(e){return"FormControl"+e}updateValue(e,t){this.value.setCustomFieldValue(`extension.${this.extension.name}.${e}`,t)}fieldValue(e,t){const i=this.value.customFields?this.value.customFields[`extension.${this.extension.name}.${e}`]:null;return null!==i&&void 0!==i?i:t}};Pe([Ae.State,Qe("design:type",Object)],De.prototype,"existingCustomFields",void 0),Pe([Ae.Action,Qe("design:type",Object)],De.prototype,"fetchExistingCustomFields",void 0),Pe([Object(c["b"])(),Qe("design:type","function"===typeof(Se="undefined"!==typeof d["default"]&&d["default"])?Se:Object)],De.prototype,"value",void 0),Pe([Object(c["b"])(),Qe("design:type","function"===typeof(Ee=!1)?Ee:Object)],De.prototype,"extension",void 0),De=Pe([Object(c["a"])({components:we["a"]})],De);var $e,Ve=De,Be=Ve,Le=Object(C["a"])(Be,_e,ke,!1,null,null,null),Ne=Le.exports,Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.taxonomyTerms.length>0?i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.taxonomyPlural))]),i("q-separator")],1),i("q-card-section",{staticClass:"q-gutter-y-md"},[i("q-select",{attrs:{filled:"",options:e.taxonomyTerms,label:"Select "+e.taxonomyPlural.toLowerCase(),"option-label":"name","option-value":"id",multiple:""},model:{value:e.selectedTaxonomyTerms,callback:function(t){e.selectedTaxonomyTerms=t},expression:"selectedTaxonomyTerms"}}),i("q-input",{attrs:{label:"Add new "+e.taxonomy,filled:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveTaxonomyTerm(t)}},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add",loading:e.saveLoading},on:{click:e.saveTaxonomyTerm}})]},proxy:!0}],null,!1,2051656636),model:{value:e.newTaxonomyTerm,callback:function(t){e.newTaxonomyTerm=t},expression:"newTaxonomyTerm"}})],1)],1):e._e()},Me=[],He=i("761a"),Ke=i.n(He),Ue=i("2ef0"),Ge=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ye=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const Je=Object(p["a"])("Taxonomy");let ze=class extends c["d"]{constructor(){super(...arguments),this.newTaxonomyTerm="",this.saveLoading=!1}created(){this.fetchTermPage({taxonomy:this.taxonomy,sortBy:"name",descending:!1})}async saveTaxonomyTerm(){this.saveLoading=!0;const e=await this.saveTerm({taxonomy:this.taxonomy,term:{name:this.newTaxonomyTerm,slug:f["a"](this.newTaxonomyTerm)}});this.value.terms?this.value.terms.push(e):this.$set(this.value,"terms",[e]),this.newTaxonomyTerm="",this.saveLoading=!1}get taxonomyTerms(){return Object(Ue["get"])(this.terms,this.taxonomy,[])}get selectedTaxonomyTerms(){return this.value.terms?this.value.terms.filter((e=>{var t;return(null===(t=e.taxonomy)||void 0===t?void 0:t.name)===this.taxonomy})):[]}set selectedTaxonomyTerms(e){var t,i,n,o;e=e.map((e=>(e.taxonomy={name:this.taxonomy},e))),null===(t=this.value.terms)||void 0===t||t.splice(0,null===(i=this.value.terms)||void 0===i?void 0:i.length,...null===(n=this.value.terms)||void 0===n?void 0:n.filter((e=>!e.taxonomy||e.taxonomy.name!==this.taxonomy))),null===(o=this.value.terms)||void 0===o||o.push(...e)}get taxonomyPlural(){return Object(Ue["upperFirst"])(Ke()(this.taxonomy))}};Ge([Je.State,Ye("design:type",Object)],ze.prototype,"terms",void 0),Ge([Je.Action,Ye("design:type",Object)],ze.prototype,"saveTerm",void 0),Ge([Je.Action,Ye("design:type",Function)],ze.prototype,"fetchTermPage",void 0),Ge([Object(c["b"])(),Ye("design:type","function"===typeof($e="undefined"!==typeof d["default"]&&d["default"])?$e:Object)],ze.prototype,"value",void 0),Ge([Object(c["b"])(),Ye("design:type",String)],ze.prototype,"taxonomy",void 0),ze=Ge([c["a"]],ze);var We=ze,Xe=We,Ze=Object(C["a"])(Xe,Ie,Me,!1,null,null,null),et=Ze.exports;R()(Ze,"components",{QCard:de["a"],QCardSection:ue["a"],QSeparator:pe["a"],QSelect:D["a"],QInput:x["a"],QBtn:$["a"]});var tt,it=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Featured image")]),i("q-separator")],1),i("q-card-section",[i("MediaSelect",{staticClass:"full-width q-mt-xs",attrs:{value:e.value.featuredImage?e.value.featuredImage.id:null},on:{"input-computed":e.setFeaturedImage}})],1)],1)},nt=[],ot=i("ba9a"),st=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},at=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let lt=class extends c["d"]{setFeaturedImage({value:e}){this.value.featuredImage=e}};st([Object(c["b"])(),at("design:type","function"===typeof(tt="undefined"!==typeof d["default"]&&d["default"])?tt:Object)],lt.prototype,"value",void 0),lt=st([Object(c["a"])({components:{MediaSelect:ot["a"]}})],lt);var rt=lt,ct=rt,dt=Object(C["a"])(ct,it,nt,!1,null,null,null),ut=dt.exports;R()(dt,"components",{QCard:de["a"],QCardSection:ue["a"],QSeparator:pe["a"]});var pt,ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.templates.length>0?i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Template")]),i("q-separator")],1),i("q-card-section",[i("q-select",{attrs:{options:e.templates,label:"Custom template",filled:"","emit-value":"","map-options":"",value:e.value.getCustomFieldValue("page_template")},on:{input:function(t){return e.value.setCustomFieldValue("page_template",t)}},scopedSlots:e._u([e.value.getCustomFieldValue("page_template")?{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){return t.stopPropagation(),e.value.deleteCustomField("page_template")}}})]},proxy:!0}:null],null,!0)})],1)],1):e._e()},mt=[],vt=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},yt=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const bt=Object(p["a"])("Content");let ht=class extends c["d"]{created(){this.fetchTemplates(this.value.type)}get templates(){if(!this.contentEntitiesTemplates[this.value.type]||0===this.contentEntitiesTemplates[this.value.type].length)return[];const e=[];for(const t of this.contentEntitiesTemplates[this.value.type])e.push({label:t,value:t});return e}};vt([bt.State,yt("design:type",Object)],ht.prototype,"contentEntitiesTemplates",void 0),vt([bt.Action,yt("design:type",Object)],ht.prototype,"fetchTemplates",void 0),vt([Object(c["b"])(),yt("design:type","function"===typeof(pt="undefined"!==typeof d["default"]&&d["default"])?pt:Object)],ht.prototype,"value",void 0),ht=vt([c["a"]],ht);var gt=ht,Ct=gt,xt=i("0016"),Ot=Object(C["a"])(Ct,ft,mt,!1,null,null,null),jt=Ot.exports;R()(Ot,"components",{QCard:de["a"],QCardSection:ue["a"],QSeparator:pe["a"],QSelect:D["a"],QIcon:xt["a"]});var Rt,qt,Tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Publish")]),i("q-separator")],1),i("q-card-section",[i("q-select",{attrs:{label:"Status",filled:"",options:e.statusOptions,"map-options":"","emit-value":""},model:{value:e.value.status,callback:function(t){e.$set(e.value,"status",t)},expression:"value.status"}})],1),i("q-card-actions",{attrs:{align:"between"}},[i("q-btn",{staticClass:"q-ma-sm",attrs:{flat:"",color:"negative",icon:"mdi-delete"},on:{click:function(t){return e.$emit("update:delete-action",!0)}}}),i("q-btn",{staticClass:"q-ma-sm",attrs:{color:"primary",label:e.publishActionText,loading:e.saveLoading},on:{click:function(t){return e.$emit("save")}}})],1)],1)},Ft=[],St=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Et=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let _t=class extends c["d"]{constructor(){super(...arguments),this.statusOptions=[{label:"Draft",value:"draft"},{label:"Private",value:"private"},{label:"Pending review",value:"pending_review"},{label:"Published",value:"publish"}]}get publishActionText(){return this.value?"publish"!==this.originalEntity.status&&"publish"===this.value.status?"Publish":"Update":""}};St([Object(c["b"])(),Et("design:type","function"===typeof(Rt="undefined"!==typeof d["default"]&&d["default"])?Rt:Object)],_t.prototype,"value",void 0),St([Object(c["b"])(),Et("design:type","function"===typeof(qt="undefined"!==typeof d["default"]&&d["default"])?qt:Object)],_t.prototype,"originalEntity",void 0),St([Object(c["b"])({type:Boolean}),Et("design:type",Boolean)],_t.prototype,"saveLoading",void 0),St([Object(c["b"])({type:Boolean}),Et("design:type",Boolean)],_t.prototype,"deleteAction",void 0),_t=St([c["a"]],_t);var kt=_t,wt=kt,Pt=Object(C["a"])(wt,Tt,Ft,!1,null,null,null),Qt=Pt.exports;R()(Pt,"components",{QCard:de["a"],QCardSection:ue["a"],QSeparator:pe["a"],QSelect:D["a"],QCardActions:ve["a"],QBtn:$["a"]});var At,Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row justify-end"},[i("q-btn",{class:{"full-width":e.$q.screen.lt.lg},attrs:{label:"Page builder",icon:"mdi-toy-brick",color:"primary",outline:""},on:{click:function(t){e.goToPageBuilderAction=!0}}}),i("q-dialog",{attrs:{persistent:""},model:{value:e.goToPageBuilderAction,callback:function(t){e.goToPageBuilderAction=t},expression:"goToPageBuilderAction"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("q-avatar",{attrs:{icon:"mdi-exclamation-thick",color:"warning","text-color":"white"}}),i("span",{staticClass:"q-ml-sm"},[e._v("Do you want to save this "+e._s(e.typeName)+" before switching to page builder?")])],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"Cancel",color:"secondary"},on:{click:function(t){e.goToPageBuilderAction=!1}}}),i("q-btn",{attrs:{flat:"",label:"No",color:"secondary"},on:{click:function(t){return e.goToPageBuilder(!1)}}}),i("q-btn",{attrs:{flat:"",label:"Yes",color:"primary",autofocus:"",loading:e.saveLoading},on:{click:function(t){return e.goToPageBuilder(!0)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.goToPageBuilder(!0)}}})],1)],1)],1)],1)},$t=[],Vt=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Bt=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const Lt=Object(p["a"])("ContentType");let Nt=class extends c["d"]{constructor(){super(...arguments),this.goToPageBuilderAction=!1}goToPageBuilder(e){e?this.$emit("save",(()=>{this.$router.push({name:this.value.type+"_edit",params:{id:this.value.id.toString()}})})):this.$router.push({name:this.value.type+"_edit",params:{id:this.value.id.toString()}})}get typeName(){var e;return this.value?this.findByName(null===(e=this.value)||void 0===e?void 0:e.type).name.toLowerCase():""}};Vt([Lt.Getter,Bt("design:type",Object)],Nt.prototype,"findByName",void 0),Vt([Object(c["b"])(),Bt("design:type","function"===typeof(At="undefined"!==typeof d["default"]&&d["default"])?At:Object)],Nt.prototype,"value",void 0),Vt([Object(c["b"])({type:Boolean}),Bt("design:type",Boolean)],Nt.prototype,"saveLoading",void 0),Nt=Vt([c["a"]],Nt);var It=Nt,Mt=It,Ht=Object(C["a"])(Mt,Dt,$t,!1,null,null,null),Kt=Ht.exports;R()(Ht,"components",{QBtn:$["a"],QDialog:ce["a"],QCard:de["a"],QCardSection:ue["a"],QAvatar:fe["a"],QCardActions:ve["a"]});var Ut,Gt,Yt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.extension.parameters.label))]),i("q-separator")],1),i("q-card-section",e._l(e.extension.controls,(function(t,n){return i(e.formControlName(t.name),{key:n,tag:"component",staticClass:"q-mb-md",attrs:{value:e.value.customFields["extension."+e.extension.name+"."+n],parameters:t.parameters},on:{input:function(t){return e.updateValue(n,t)}}})})),1)],1)},Jt=[],zt=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Wt=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const Xt=Object(p["a"])("Content");let Zt=class extends c["d"]{constructor(){super(...arguments),this.existingCustomFieldsOptions=null}created(){var e;this.fetchExistingCustomFields().then((()=>this.existingCustomFieldsOptions=Object.values(this.existingCustomFields))),this.value.customFields=Object.assign({},null!==(e=this.value.customFields)&&void 0!==e?e:{})}formControlName(e){return"FormControl"+e}updateValue(e,t){this.value.setCustomFieldValue(`extension.${this.extension.name}.${e}`,t)}};zt([Xt.State,Wt("design:type",Object)],Zt.prototype,"existingCustomFields",void 0),zt([Xt.Action,Wt("design:type",Object)],Zt.prototype,"fetchExistingCustomFields",void 0),zt([Object(c["b"])(),Wt("design:type","function"===typeof(Ut="undefined"!==typeof d["default"]&&d["default"])?Ut:Object)],Zt.prototype,"value",void 0),zt([Object(c["b"])(),Wt("design:type","function"===typeof(Gt=!1)?Gt:Object)],Zt.prototype,"extension",void 0),Zt=zt([Object(c["a"])({components:we["a"]})],Zt);var ei=Zt,ti=ei,ii=Object(C["a"])(ti,Yt,Jt,!1,null,null,null),ni=ii.exports;R()(ii,"components",{QCard:de["a"],QCardSection:ue["a"],QSeparator:pe["a"]});var oi=i("c5f3"),si=i("7905");class ai{getCustomField(e){let t=this.customFieldsComputed.find((t=>t.key===e));return t||(t=this.customFieldsComputed.find((e=>""===e.key))),this.setCustomFieldKey(t,e),this.customFieldsComputed.find((t=>t.key===e))}getCustomFieldValue(e){var t;return null===(t=this.customFieldsComputed.find((t=>t.key===e)))||void 0===t?void 0:t.value}setCustomFieldKey(e,t){const i=this.customFieldsComputed;i.find((t=>t.key===e.key)).key=t,this.customFieldsComputed=i}setCustomFieldValue(e,t){if(void 0===t)return void this.deleteCustomField(e);"string"===typeof e&&(e=this.getCustomField(e));const i=this.customFieldsComputed;i.find((t=>t.key===e.key)).value=t,this.customFieldsComputed=i}deleteCustomField(e){"string"===typeof e&&(e=this.getCustomField(e));const t=this.customFieldsComputed;t.splice(t.findIndex((t=>t.key===e.key)),1),this.customFieldsComputed=t}get customFieldsComputed(){const e=[];if(this.customFields)for(const t in this.customFields)this.customFields.hasOwnProperty(t)&&e.push({key:t,value:this.customFields[t]});return e.push({key:"",value:""}),e}set customFieldsComputed(e){this.customFields={};for(const t of e)t.key.trim()&&(this.customFields[t.key]=t.value)}}i("98db");var li=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},ri=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const ci=Object(p["a"])("ContentType"),di=Object(p["a"])("Content"),ui=Object(p["a"])("Taxonomy");let pi=class extends c["d"]{constructor(){super(...arguments),this.model=null,this.saveLoading=!1,this.deleteLoading=!1,this.deleteAction=!1,this.tab="content",this.tabs=[{name:"content",icon:"mdi-file-document-edit-outline",label:"Content",panel:{component:"ClassicEditorPanelContent"}},{name:"seo",icon:"mdi-card-search-outline",label:"SEO",panel:{component:"ClassicEditorPanelSEO"}},{name:"custom_fields",icon:"mdi-form-textbox",label:"Custom fields",panel:{component:"ClassicEditorPanelCustomFields"}},{visible:e=>e.revisions.length>1,name:"revisions",icon:"mdi-timeline-text-outline",label:"Revisions",panel:{component:"ClassicEditorPanelRevisions"}}],this.sidebarComponents=[{component:"ClassicEditorSidebarSwitchPageBuilder"},{component:"ClassicEditorSidebarPublish"},{component:"ClassicEditorSidebarFeaturedImage"},{component:"ClassicEditorSidebarPageTemplate"},{id:"ClassicEditorSidebarTaxonomy_category",visible:()=>this.doesContentTypeHasTaxonomy("category"),component:"ClassicEditorSidebarTaxonomy",props:{taxonomy:"category"}},{id:"ClassicEditorSidebarTaxonomy_tag",visible:()=>this.doesContentTypeHasTaxonomy("tag"),component:"ClassicEditorSidebarTaxonomy",props:{taxonomy:"tag"}}]}created(){si["a"].on("ContentType:loaded",(()=>{this.getEntity()})),this.fetchTaxonomies(),this.contentTypes.length>0&&this.getEntity()}async getEntity(){this.originalEntity=await this.fetchFullById({type:this.type,id:this.id}),this.model=Object(a["a"])(new ai,Object(Ue["cloneDeep"])(this.originalEntity)),this.fetchContentEntityRevisions(this.model);const e=await this.fetchContentTypeEditorExtension(this.type);e.tabs.forEach((e=>{var t;this.tabs.push({name:e.name,icon:null!==(t=e.parameters.icon)&&void 0!==t?t:"mdi-file-document-edit-outline",label:e.parameters.label,panel:{component:"ClassicEditorPanelDynamic",props:{extension:e}}})})),e.sidebarComponents.forEach((e=>{this.sidebarComponents.push({id:`ClassicEditorSidebarDynamic_${e.name}`,component:"ClassicEditorSidebarDynamic",props:{extension:e}})})),si["a"].emit("ContentEditClassic:sidebarComponents",{type:this.type,sidebarComponents:this.sidebarComponents}),si["a"].emit("ContentEditClassic:tabs",{type:this.type,tabs:this.tabs})}async save(e){if(!this.model)return;this.saveLoading=!0;let t=Object(Ue["cloneDeep"])(this.model);t=await this.saveEntity(t),this.model=Object(a["a"])(new ai,t),this.saveLoading=!1,e&&e(),await this.fetchContentEntityRevisions(this.model)}reload(){this.getEntity()}get typeName(){var e;return this.model?this.findByName(null===(e=this.model)||void 0===e?void 0:e.type).name.toLowerCase():""}async confirmDelete(){this.deleteLoading=!0,await this.deleteEntity(this.model),this.deleteLoading=!1,this.deleteAction=!1,await this.$router.push({name:this.type+"_index"})}get revisions(){var e;return this.contentEntitiesRevisions.hasOwnProperty(this.type)&&this.contentEntitiesRevisions[this.type].hasOwnProperty(this.id.toString())&&null!==(e=this.contentEntitiesRevisions[this.type][this.id.toString()])&&void 0!==e?e:[]}onRevisionsChanged(){"revisions"===this.tab&&this.revisions.length<=1&&(this.tab="content")}doesContentTypeHasTaxonomy(e){return this.taxonomies.filter((t=>{var i;return(null===(i=t.contentTypes)||void 0===i?void 0:i.includes(this.type))&&t.name===e})).length>0}get visibleTabs(){return this.tabs.filter((e=>!e.visible||e.visible(this)))}get visibleSidebarComponents(){return this.sidebarComponents.filter((e=>!e.visible||e.visible(this)))}};li([ci.State,ri("design:type",Object)],pi.prototype,"contentTypes",void 0),li([ci.Action,ri("design:type",Object)],pi.prototype,"fetchContentTypeEditorExtension",void 0),li([ci.Getter,ri("design:type",Object)],pi.prototype,"findByName",void 0),li([di.State,ri("design:type",Object)],pi.prototype,"contentEntitiesRevisions",void 0),li([di.Action,ri("design:type",Object)],pi.prototype,"fetchFullById",void 0),li([di.Action,ri("design:type",Object)],pi.prototype,"saveEntity",void 0),li([di.Action,ri("design:type",Object)],pi.prototype,"deleteEntity",void 0),li([di.Action,ri("design:type",Object)],pi.prototype,"fetchContentEntityRevisions",void 0),li([ui.State,ri("design:type",Array)],pi.prototype,"taxonomies",void 0),li([ui.Action,ri("design:type",Object)],pi.prototype,"fetchTaxonomies",void 0),li([Object(c["b"])(),ri("design:type",Number)],pi.prototype,"id",void 0),li([Object(c["b"])(),ri("design:type",String)],pi.prototype,"type",void 0),li([Object(c["e"])("revisions"),ri("design:type",Function),ri("design:paramtypes",[]),ri("design:returntype",void 0)],pi.prototype,"onRevisionsChanged",null),pi=li([Object(c["a"])({components:{ClassicEditorPanelContent:T,ClassicEditorPanelSEO:Fe,ClassicEditorPanelCustomFields:B,ClassicEditorPanelRevisions:be,ClassicEditorPanelDynamic:Ne,ClassicEditorSidebarPublish:Qt,ClassicEditorSidebarFeaturedImage:ut,ClassicEditorSidebarSwitchPageBuilder:Kt,ClassicEditorSidebarPageTemplate:jt,ClassicEditorSidebarTaxonomy:et,ClassicEditorSidebarDynamic:ni,MediaSelect:ot["a"],MediaLibraryDialog:oi["a"]}})],pi);var fi=pi,mi=fi,vi=i("9989"),yi=i("429b"),bi=i("7460"),hi=i("adad"),gi=i("823b"),Ci=i("de5e"),xi=i("65c6"),Oi=i("6ac5"),ji=i("05c0"),Ri=Object(C["a"])(mi,o,s,!1,null,null,null);t["default"]=Ri.exports;R()(Ri,"components",{QPage:vi["a"],QCard:de["a"],QTabs:yi["a"],QTab:bi["a"],QSeparator:pe["a"],QTabPanels:hi["a"],QTabPanel:gi["a"],QDialog:ce["a"],QCardSection:ue["a"],QAvatar:fe["a"],QCardActions:ve["a"],QBtn:$["a"],QPageSticky:Ci["a"],QToolbar:xi["a"],QToolbarTitle:Oi["a"],QTooltip:ji["a"]})}}]);