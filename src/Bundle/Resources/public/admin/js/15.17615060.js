(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{ff63:function(e,t,n){"use strict";n.r(t);var a,i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("div",{staticClass:"q-ma-md row q-col-gutter-md",staticStyle:{"padding-top":"42px"}},[n("div",{staticClass:"col-md-2 col-sm-6 col-xs"},[n("q-select",{attrs:{label:"Select a menu to edit",filled:"",options:e.menus,"option-label":"name","option-value":"id",value:e.selectedMenu},on:{input:function(t){return e.selectCurrentMenu(t)}}})],1),n("div",{staticClass:"col-md-2 col-sm-6 col-xs"},[n("q-input",{attrs:{label:"Add new menu",filled:""},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:function(t){return e.addMenu(e.newMenu)}}})]},proxy:!0}]),model:{value:e.newMenu,callback:function(t){e.newMenu=t},expression:"newMenu"}})],1)]),e.selectedMenu?n("div",{staticClass:"q-ma-md row q-col-gutter-md"},[n("div",{staticClass:"col-md-2 col-sm-4 col-xs"},e._l(e.contentTypes,(function(t){return n("q-expansion-item",{key:t.name,staticClass:"q-mb-xs",attrs:{label:e.getLabel(t),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"},on:{click:function(n){return e.loadEntities(t,1)}}},[e.getEntitiesOfType(t,e.page[t.name]).length>0?n("div",[n("q-scroll-area",{staticStyle:{height:"300px"}},[n("div",{staticClass:"q-pa-sm"},[n("q-pagination",{attrs:{value:e.page[t.name],max:e.getMaxPages(t),"max-pages":5,color:"secondary","boundary-links":e.getMaxPages(t)>5},on:{input:function(n){return e.loadEntities(t,n)}}})],1),n("q-list",{attrs:{dense:""}},e._l(e.getEntitiesOfType(t,e.page[t.name]),(function(t){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.id,attrs:{tag:"label"}},[n("q-item-section",{attrs:{side:""}},[n("q-checkbox",{attrs:{color:"secondary","false-value":null,"indeterminate-value":"indeterminate",dense:""},model:{value:e.checked[t.id],callback:function(n){e.$set(e.checked,t.id,n)},expression:"checked[entity.id]"}})],1),n("q-item-section",[n("q-item-label",[e._v(e._s(t.title))])],1)],1)})),1),n("div",{staticClass:"q-pa-sm q-pr-lg flex justify-end"},[n("q-btn",{attrs:{label:"Add to menu",dense:"",color:"secondary"},on:{click:function(t){return e.addSelectedToMenu()}}})],1)],1)],1):e._e()])})),1),n("div",{staticClass:"col-md-8 col-sm-6 col-xs"},[n("div",{staticClass:"text-h4"},[e._v(e._s(e.selectedMenu.name))]),n("q-sortable-tree",{attrs:{nodes:e.menuTrees[e.selectedMenu.id],"label-key":"title","node-key":"uid","default-expand-all":!0}}),n("q-btn",{staticClass:"q-mt-lg",attrs:{label:"Save menu",color:"primary"},on:{click:e.saveMenu}})],1)]):e._e(),n("q-page-sticky",{attrs:{expand:"",position:"top"}},[n("q-toolbar",{staticClass:"bg-primary text-white"},[n("q-toolbar-title",[e._v("\n                Menus\n            ")])],1)],1)],1)},s=[],o=n("3043"),c=n("1732"),l=n("3890"),d=n.n(l),r=n("60a3"),p=n("4bb5"),u=n("2ef0"),y=function(e,t,n,a){var i,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},m=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const f=Object(p["a"])("ContentType"),g=Object(p["a"])("Menu");let b=class extends r["d"]{constructor(){super(...arguments),this.newMenu="",this.page={},this.checked={},this.menuTrees={}}created(){this.queryMenus()}selectCurrentMenu(e){this.selectMenu(e),this.menuTrees.hasOwnProperty(e.id)||this.$set(this.menuTrees,e.id,[...Object(u["defaultsDeep"])({},e).menuItems])}getLabel(e){return o["a"](e.labels.pluralName)}async loadEntities(e,t){this.page[e.name]=t,0===this.getEntitiesOfType(e,t).length&&await this.queryEntitiesForMenu({contentType:e.name,page:t}),this.$forceUpdate()}getEntitiesOfType(e,t){return this.getContentEntitiesOfType({contentType:e.name,page:t})}getMaxPages(e){return this.getMaxPagesOfType(e.name)}addSelectedToMenu(){const e=Object.keys(this.checked).filter((e=>this.checked[e])).map((e=>parseInt(e))),t=e.map((e=>this.getContentEntityById(e))).filter((e=>null!==e));this.menuTrees[this.selectedMenu.id].push(...t.map((e=>({uid:Object(c["a"])(),entityId:e.id,title:e.title,children:[]})))),this.checked={}}saveMenu(){this.updateSelectedMenu(this.menuTrees[this.selectedMenu.id])}};y([f.State,m("design:type",Array)],b.prototype,"contentTypes",void 0),y([g.State,m("design:type",Array)],b.prototype,"menus",void 0),y([g.State,m("design:type","function"===typeof(a="undefined"!==typeof d.a&&d.a)?a:Object)],b.prototype,"selectedMenu",void 0),y([g.Action,m("design:type",Object)],b.prototype,"queryMenus",void 0),y([g.Action,m("design:type",Object)],b.prototype,"addMenu",void 0),y([g.Action,m("design:type",Object)],b.prototype,"selectMenu",void 0),y([g.Action,m("design:type",Object)],b.prototype,"queryEntitiesForMenu",void 0),y([g.Action,m("design:type",Object)],b.prototype,"updateSelectedMenu",void 0),y([g.Getter,m("design:type",Object)],b.prototype,"getContentEntitiesOfType",void 0),y([g.Getter,m("design:type",Object)],b.prototype,"getContentEntityById",void 0),y([g.Getter,m("design:type",Object)],b.prototype,"getMaxPagesOfType",void 0),b=y([r["a"]],b);var h=b,v=h,M=n("2877"),q=n("9989"),x=n("ddd8"),O=n("27f9"),k=n("9c40"),T=n("3b73"),w=n("4983"),j=n("3b16"),C=n("1c1c"),S=n("66e5"),E=n("4074"),Q=n("8f8e"),_=n("0170"),P=n("de5e"),A=n("65c6"),I=n("6ac5"),R=n("714f"),L=n("eebe"),$=n.n(L),B=Object(M["a"])(v,i,s,!1,null,null,null);t["default"]=B.exports;$()(B,"components",{QPage:q["a"],QSelect:x["a"],QInput:O["a"],QBtn:k["a"],QExpansionItem:T["a"],QScrollArea:w["a"],QPagination:j["a"],QList:C["a"],QItem:S["a"],QItemSection:E["a"],QCheckbox:Q["a"],QItemLabel:_["a"],QPageSticky:P["a"],QToolbar:A["a"],QToolbarTitle:I["a"]}),$()(B,"directives",{Ripple:R["a"]})}}]);