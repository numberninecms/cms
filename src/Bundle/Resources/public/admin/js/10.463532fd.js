(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{c587:function(e,t,i){"use strict";i.r(t);var o,n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("div",{staticStyle:{"padding-top":"42px"}},[e.model?i("div",{staticClass:"row q-pa-md q-gutter-x-md"},[i("div",{staticClass:"col-12 col-md-9"},[i("q-card",{attrs:{flat:""}},[i("q-tabs",{staticClass:"text-primary shadow-2",attrs:{align:"left",dense:"","inline-label":"","active-color":"primary","indicator-color":"primary"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.visibleTabs,(function(t){return i("q-tab",{key:t.name,attrs:{name:t.name,icon:t.icon,label:e.$q.screen.gt.xs?t.label:""}})})),1),i("q-separator"),i("q-tab-panels",{attrs:{"keep-alive":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return i("q-tab-panel",{key:t.name,attrs:{name:t.name}},[i(t.panel.component,e._g(e._b({tag:"component",model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"component",t.panel.props,!1),Object.assign({},{save:e.save,reload:e.reload},t.panel.events)))],1)})),1)],1)],1),i("div",{staticClass:"col q-gutter-y-md"},e._l(e.visibleSidebarComponents,(function(t){return i(t.component,e._g(e._b({key:t.id?t.id:t.component,tag:"component",attrs:{"delete-action":e.deleteAction},on:{"update:deleteAction":function(t){e.deleteAction=t},"update:delete-action":function(t){e.deleteAction=t}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"component",Object.assign({},{originalEntity:e.originalEntity,saveLoading:e.saveLoading},t.props),!1),Object.assign({},{save:e.save,reload:e.reload},t.events)))})),1)]):e._e()]),i("q-dialog",{attrs:{persistent:""},model:{value:e.deleteAction,callback:function(t){e.deleteAction=t},expression:"deleteAction"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("q-avatar",{attrs:{icon:"delete_forever",color:"negative","text-color":"white"}}),i("span",{staticClass:"q-ml-sm"},[e._v("Do you want to delete this "+e._s(e.typeName)+"?")])],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"No",color:"secondary"},on:{click:function(t){e.deleteAction=!1}}}),i("q-btn",{attrs:{flat:"",label:"Yes",color:"primary",autofocus:"",loading:e.deleteLoading},on:{click:e.confirmDelete,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmDelete(t)}}})],1)],1)],1),i("MediaLibraryDialog"),i("q-page-sticky",{staticStyle:{"z-index":"10"},attrs:{expand:"",position:"top"}},[i("q-toolbar",{staticClass:"bg-primary text-white"},[e.id&&e.model?i("q-toolbar-title",[e._v(e._s(e.model.title))]):i("q-toolbar-title",[e._v("Loading...")]),e.model?i("q-btn",{attrs:{flat:"",dense:"",color:"white",icon:"mdi-eye-outline",href:e.model.publicUrl,type:"a",target:"_blank"}},[i("q-tooltip",[e._v("View")])],1):e._e()],1)],1)],1)},a=[],s=i("6f7e"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column q-gutter-y-md"},[i("q-input",{attrs:{filled:"",label:"Title"},model:{value:e.value.title,callback:function(t){e.$set(e.value,"title",t)},expression:"value.title"}}),i("div",{staticClass:"row q-gutter-x-md items-center"},[i("div",[i("a",{attrs:{href:"#"}},[e._v(e._s(e.rootAbsoluteUrl)+e._s(e.pagePermalink))]),i("q-popup-edit",{attrs:{title:"Permalink",buttons:"","label-set":"OK"},on:{save:e.validateSlug},model:{value:e.value.slug,callback:function(t){e.$set(e.value,"slug",t)},expression:"value.slug"}},[i("q-input",{attrs:{dense:"",autofocus:"",filled:"","stack-label":"",clearable:"",placeholder:e.slugifiedTitle},model:{value:e.value.slug,callback:function(t){e.$set(e.value,"slug",t)},expression:"value.slug"}})],1)],1),i("q-btn",{attrs:{flat:"",dense:"",color:"secondary",icon:"mdi-eye-outline",href:e.value.publicUrl,type:"a",target:"_blank"}},[i("q-tooltip",[e._v("View")])],1)],1),i("p",{staticClass:"text-bold text-body1 q-mb-none"},[e._v("Content")]),i("TinyEditor",{model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}})],1)},r=[],c=i("1b40"),d=i("583e"),u=i.n(d),p=i("bd7a"),f=i("4bb5"),v=i("ff94"),m=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},y=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const b=Object(f["a"])("Setting");let g=class extends c["d"]{created(){var e;this.querySettings(),this.value.excerpt=null!==(e=this.value.excerpt)&&void 0!==e?e:""}validateSlug(e){e||(this.value.slug=this.slugifiedTitle)}get rootAbsoluteUrl(){return this.getSettingValue("root_absolute_url")}get pagePermalink(){var e;return this.getSettingValue("permalinks")?null===(e=this.getSettingValue("permalinks")[this.value.type])||void 0===e?void 0:e.replace(/^\//,"").replace("{slug}",this.value.slug):void 0}get slugifiedTitle(){return v["a"](this.value.title)}};m([b.State,y("design:type",Object)],g.prototype,"settings",void 0),m([b.Action,y("design:type",Object)],g.prototype,"querySettings",void 0),m([b.Getter,y("design:type",Object)],g.prototype,"getSettingValue",void 0),m([Object(c["b"])(),y("design:type","function"===typeof(o="undefined"!==typeof u.a&&u.a)?o:Object)],g.prototype,"value",void 0),g=m([Object(c["a"])({components:{TinyEditor:p["a"]}})],g);var h=g,C=h,x=i("2877"),O=i("27f9"),j=i("42a1"),R=i("9c40"),T=i("05c0"),q=i("eebe"),S=i.n(q),k=Object(x["a"])(C,l,r,!1,null,null,null),_=k.exports;S()(k,"components",{QInput:O["a"],QPopupEdit:j["a"],QBtn:R["a"],QTooltip:T["a"]});var E,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.value.customFieldsComputed,(function(t){return i("div",{key:t.id,staticClass:"row q-col-gutter-md q-gutter-y-md items-start"},[i("q-select",{staticClass:"col-12 col-sm-6",attrs:{filled:"","use-input":"","fill-input":"","input-debounce":"0","hide-selected":"",label:"Name",options:e.existingCustomFieldsOptions,value:t.key},on:{filter:e.customFieldAutocomplete,"input-value":function(i){return e.value.setCustomFieldKey(t,i)}}}),i("q-input",{staticClass:"col-12 col-sm-6",attrs:{value:t.value,label:"Value",filled:"",autogrow:""},on:{input:function(i){return e.value.setCustomFieldValue(t,i)}},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-delete"},on:{click:function(i){return e.value.deleteCustomField(t)}}})]},proxy:!0}],null,!0)})],1)})),0)},F=[],P=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},Q=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const A=Object(f["a"])("Content");let D=class extends c["d"]{constructor(){super(...arguments),this.existingCustomFieldsOptions=null}created(){var e;this.fetchExistingCustomFields().then((()=>this.existingCustomFieldsOptions=Object.values(this.existingCustomFields))),this.value.customFields=Object.assign({},null!==(e=this.value.customFields)&&void 0!==e?e:{})}customFieldAutocomplete(e,t){t((()=>{const t=e.toLocaleLowerCase();this.existingCustomFieldsOptions=Object.values(this.existingCustomFields).filter((e=>e.toLocaleLowerCase().includes(t)))}))}};P([A.State,Q("design:type",Object)],D.prototype,"existingCustomFields",void 0),P([A.Action,Q("design:type",Object)],D.prototype,"fetchExistingCustomFields",void 0),P([Object(c["b"])(),Q("design:type","function"===typeof(E="undefined"!==typeof u.a&&u.a)?E:Object)],D.prototype,"value",void 0),D=P([c["a"]],D);var B=D,L=B,$=i("ddd8"),V=Object(x["a"])(L,w,F,!1,null,null,null),I=V.exports;S()(V,"components",{QSelect:$["a"],QInput:O["a"],QBtn:R["a"]});var N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.revisions.length>1?i("div",[i("div",{staticClass:"row q-gutter-x-xl items-center"},[i("q-slider",{staticClass:"col q-mt-lg",attrs:{color:"primary",markers:"",snap:"",label:"","label-always":"","label-value":e.currentRevisionDate,min:0,step:1,max:e.revisions.length-1},model:{value:e.currentRevisionStep,callback:function(t){e.currentRevisionStep=t},expression:"currentRevisionStep"}}),i("q-btn",{staticClass:"col-auto",attrs:{color:"primary",label:"Revert",disable:e.currentRevisionVersion===e.revisions[0].version},on:{click:function(t){e.confirmRevert=!0}}})],1),i("RevisionFieldDiff",{attrs:{title:"Title",field:"title",version:e.currentRevisionVersion,revisions:e.revisions}}),i("RevisionFieldDiff",{attrs:{title:"Slug",field:"slug",version:e.currentRevisionVersion,revisions:e.revisions}}),i("RevisionFieldDiff",{attrs:{title:"Excerpt",field:"excerpt",version:e.currentRevisionVersion,revisions:e.revisions}}),i("RevisionFieldDiff",{attrs:{title:"Content",field:"content",version:e.currentRevisionVersion,revisions:e.revisions}}),i("q-dialog",{attrs:{value:e.confirmRevert}},[i("q-card",{attrs:{f:""}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.currentRevisionDate)+" version")]),i("q-separator")],1),i("q-card-section",{staticClass:"row items-center"},[i("q-avatar",{attrs:{icon:"mdi-alert-remove",color:"warning","text-color":"white"}}),i("span",{staticClass:"q-ml-sm text-subtitle1"},[e._v("Do you want to revert this "+e._s(e.value.type)+"?")])],1),i("q-card-section",[i("span",[e._v("All revisions past "),i("q-badge",{attrs:{label:e.currentRevisionDate,color:"warning"}}),e._v(" will be permanently deleted.")],1)]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"No",color:"secondary"},on:{click:function(t){e.confirmRevert=!1}}}),i("q-btn",{attrs:{flat:"",loading:e.revertLoading,label:"Yes",color:"primary",autofocus:""},on:{click:e.confirmRevertAction,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmRevertAction(t)}}})],1)],1)],1)],1):e._e()},M=[],H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hasFieldValueSinceVersion(e.field,e.version)?i("div",[i("p",{staticClass:"text-h6 q-ma-none"},[e._v(e._s(e.title))]),e.previous!==e.current?i("code-diff",{staticClass:"q-ma-none full-width",attrs:{"old-string":e.previous,"new-string":e.current}}):i("p",{domProps:{innerHTML:e._s(e.current)}})],1):e._e()},K=[],U=i("4eff"),G=i.n(U),Y=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},J=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let z=class extends c["d"]{get previous(){return this.getFieldForVersion(this.field,this.version-1)}get current(){return this.getFieldForVersion(this.field,this.version)}getFieldForVersion(e,t){var i;if(t<=0)return"";const o=this.revisions.slice(this.revisions.findIndex((e=>e.version===t)));let n=null!==(i=o[0][e])&&void 0!==i?i:null;if(n)return`${n}\n`;for(let a=1;a<o.length;a++)if(o[a][e])return`${o[a][e]}\n`;return""}hasFieldValueSinceVersion(e,t){const i=this.revisions.slice(this.revisions.findIndex((e=>e.version===t)));for(const o of i)if(o[e])return!0;return!1}};Y([Object(c["b"])({type:String}),J("design:type",String)],z.prototype,"title",void 0),Y([Object(c["b"])({type:String}),J("design:type",String)],z.prototype,"field",void 0),Y([Object(c["b"])(),J("design:type",Number)],z.prototype,"version",void 0),Y([Object(c["b"])(),J("design:type",Array)],z.prototype,"revisions",void 0),z=Y([Object(c["a"])({components:{CodeDiff:G.a}})],z);var W,X=z,Z=X,ee=Object(x["a"])(Z,H,K,!1,null,null,null),te=ee.exports,ie=i("b9b9"),oe=i.n(ie),ne=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},ae=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const se=Object(f["a"])("Content");let le=class extends c["d"]{constructor(){super(...arguments),this.currentRevisionStep=0,this.confirmRevert=!1,this.revertLoading=!1}activated(){this.currentRevisionStep=this.revisions.length-1}get revisions(){var e;return this.contentEntitiesRevisions.hasOwnProperty(this.value.type)&&this.contentEntitiesRevisions[this.value.type].hasOwnProperty(this.value.id.toString())&&null!==(e=this.contentEntitiesRevisions[this.value.type][this.value.id.toString()])&&void 0!==e?e:[]}get currentRevisionDate(){var e;const t=null===(e=this.revisions.find((e=>e.version===this.currentRevisionVersion)))||void 0===e?void 0:e.date;return t?oe()(t,"mmmm d, yyyy HH:MM"):this.currentRevisionVersion.toString()}get currentRevisionVersion(){return this.currentRevisionStep>this.revisions.length-1?0:this.revisions[this.revisions.length-this.currentRevisionStep-1].version}async confirmRevertAction(){await this.revertEntity({entity:this.value,version:this.currentRevisionVersion}),this.$emit("reload"),this.confirmRevert=!1}};ne([se.State,ae("design:type",Object)],le.prototype,"contentEntitiesRevisions",void 0),ne([se.Action,ae("design:type",Object)],le.prototype,"revertEntity",void 0),ne([Object(c["b"])(),ae("design:type","function"===typeof(W="undefined"!==typeof u.a&&u.a)?W:Object)],le.prototype,"value",void 0),le=ne([Object(c["a"])({components:{RevisionFieldDiff:te}})],le);var re=le,ce=re,de=i("c1d0"),ue=i("24e8"),pe=i("f09f"),fe=i("a370"),ve=i("eb85"),me=i("cb32"),ye=i("58a81"),be=i("4b7e"),ge=Object(x["a"])(ce,N,M,!1,null,null,null),he=ge.exports;S()(ge,"components",{QSlider:de["a"],QBtn:R["a"],QDialog:ue["a"],QCard:pe["a"],QCardSection:fe["a"],QSeparator:ve["a"],QAvatar:me["a"],QBadge:ye["a"],QCardActions:be["a"]});var Ce,xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column q-gutter-y-md"},[i("q-input",{attrs:{filled:"",label:"SEO title",counter:"",placeholder:e.value.title,hint:"Keep it under 70 characters for best results"},model:{value:e.value.seoTitle,callback:function(t){e.$set(e.value,"seoTitle",t)},expression:"value.seoTitle"}}),i("q-input",{attrs:{filled:"",label:"Meta description",type:"textarea",autogrow:"",hint:"Maximum 157 characters",rules:[function(e){return e.length<=157||"Maximum 157 characters"}],counter:""},model:{value:e.value.seoDescription,callback:function(t){e.$set(e.value,"seoDescription",t)},expression:"value.seoDescription"}})],1)},Oe=[],je=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},Re=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Te=class extends c["d"]{};je([Object(c["b"])(),Re("design:type","function"===typeof(Ce="undefined"!==typeof u.a&&u.a)?Ce:Object)],Te.prototype,"value",void 0),Te=je([c["a"]],Te);var qe=Te,Se=qe,ke=Object(x["a"])(Se,xe,Oe,!1,null,null,null),_e=ke.exports;S()(ke,"components",{QInput:O["a"]});var Ee,we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.taxonomyTerms.length>0?i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.taxonomyPlural))]),i("q-separator")],1),i("q-card-section",{staticClass:"q-gutter-y-md"},[i("q-select",{attrs:{filled:"",options:e.taxonomyTerms,label:"Select "+e.taxonomyPlural.toLowerCase(),"option-label":"name","option-value":"id",multiple:""},model:{value:e.selectedTaxonomyTerms,callback:function(t){e.selectedTaxonomyTerms=t},expression:"selectedTaxonomyTerms"}}),i("q-input",{attrs:{label:"Add new "+e.taxonomy,filled:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveTaxonomyTerm(t)}},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add",loading:e.saveLoading},on:{click:e.saveTaxonomyTerm}})]},proxy:!0}],null,!1,2051656636),model:{value:e.newTaxonomyTerm,callback:function(t){e.newTaxonomyTerm=t},expression:"newTaxonomyTerm"}})],1)],1):e._e()},Fe=[],Pe=i("761a"),Qe=i.n(Pe),Ae=i("2ef0"),De=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},Be=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const Le=Object(f["a"])("Taxonomy");let $e=class extends c["d"]{constructor(){super(...arguments),this.newTaxonomyTerm="",this.saveLoading=!1}created(){this.fetchTermPage({taxonomy:this.taxonomy,sortBy:"name",descending:!1})}async saveTaxonomyTerm(){this.saveLoading=!0;const e=await this.saveTerm({taxonomy:this.taxonomy,term:{name:this.newTaxonomyTerm,slug:v["a"](this.newTaxonomyTerm)}});this.value.terms?this.value.terms.push(e):this.$set(this.value,"terms",[e]),this.newTaxonomyTerm="",this.saveLoading=!1}get taxonomyTerms(){return Object(Ae["get"])(this.terms,this.taxonomy,[])}get selectedTaxonomyTerms(){return this.value.terms?this.value.terms.filter((e=>{var t;return(null===(t=e.taxonomy)||void 0===t?void 0:t.name)===this.taxonomy})):[]}set selectedTaxonomyTerms(e){var t,i,o,n;e=e.map((e=>(e.taxonomy={name:this.taxonomy},e))),null===(t=this.value.terms)||void 0===t||t.splice(0,null===(i=this.value.terms)||void 0===i?void 0:i.length,...null===(o=this.value.terms)||void 0===o?void 0:o.filter((e=>!e.taxonomy||e.taxonomy.name!==this.taxonomy))),null===(n=this.value.terms)||void 0===n||n.push(...e)}get taxonomyPlural(){return Object(Ae["upperFirst"])(Qe()(this.taxonomy))}};De([Le.State,Be("design:type",Object)],$e.prototype,"terms",void 0),De([Le.Action,Be("design:type",Object)],$e.prototype,"saveTerm",void 0),De([Le.Action,Be("design:type",Function)],$e.prototype,"fetchTermPage",void 0),De([Object(c["b"])(),Be("design:type","function"===typeof(Ee="undefined"!==typeof u.a&&u.a)?Ee:Object)],$e.prototype,"value",void 0),De([Object(c["b"])(),Be("design:type",String)],$e.prototype,"taxonomy",void 0),$e=De([c["a"]],$e);var Ve=$e,Ie=Ve,Ne=Object(x["a"])(Ie,we,Fe,!1,null,null,null),Me=Ne.exports;S()(Ne,"components",{QCard:pe["a"],QCardSection:fe["a"],QSeparator:ve["a"],QSelect:$["a"],QInput:O["a"],QBtn:R["a"]});var He,Ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Featured image")]),i("q-separator")],1),i("q-card-section",[i("MediaSelect",{staticClass:"full-width q-mt-xs",attrs:{value:e.value.featuredImage?e.value.featuredImage.id:null},on:{"input-computed":e.setFeaturedImage}})],1)],1)},Ue=[],Ge=i("ba9a"),Ye=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},Je=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let ze=class extends c["d"]{setFeaturedImage({value:e}){this.value.featuredImage=e}};Ye([Object(c["b"])(),Je("design:type","function"===typeof(He="undefined"!==typeof u.a&&u.a)?He:Object)],ze.prototype,"value",void 0),ze=Ye([Object(c["a"])({components:{MediaSelect:Ge["a"]}})],ze);var We=ze,Xe=We,Ze=Object(x["a"])(Xe,Ke,Ue,!1,null,null,null),et=Ze.exports;S()(Ze,"components",{QCard:pe["a"],QCardSection:fe["a"],QSeparator:ve["a"]});var tt,it=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.templates.length>0?i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Template")]),i("q-separator")],1),i("q-card-section",[i("q-select",{attrs:{options:e.templates,label:"Custom template",filled:"","emit-value":"","map-options":"",value:e.value.getCustomFieldValue("page_template")},on:{input:function(t){return e.value.setCustomFieldValue("page_template",t)}},scopedSlots:e._u([e.value.getCustomFieldValue("page_template")?{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){return t.stopPropagation(),e.value.deleteCustomField("page_template")}}})]},proxy:!0}:null],null,!0)})],1)],1):e._e()},ot=[],nt=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},at=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const st=Object(f["a"])("Content");let lt=class extends c["d"]{created(){this.fetchTemplates(this.value.type)}get templates(){if(!this.contentEntitiesTemplates[this.value.type]||0===this.contentEntitiesTemplates[this.value.type].length)return[];const e=[];for(const t of this.contentEntitiesTemplates[this.value.type])e.push({label:t,value:t});return e}};nt([st.State,at("design:type",Object)],lt.prototype,"contentEntitiesTemplates",void 0),nt([st.Action,at("design:type",Object)],lt.prototype,"fetchTemplates",void 0),nt([Object(c["b"])(),at("design:type","function"===typeof(tt="undefined"!==typeof u.a&&u.a)?tt:Object)],lt.prototype,"value",void 0),lt=nt([c["a"]],lt);var rt=lt,ct=rt,dt=i("0016"),ut=Object(x["a"])(ct,it,ot,!1,null,null,null),pt=ut.exports;S()(ut,"components",{QCard:pe["a"],QCardSection:fe["a"],QSeparator:ve["a"],QSelect:$["a"],QIcon:dt["a"]});var ft,vt,mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Publish")]),i("q-separator")],1),i("q-card-section",[i("q-select",{attrs:{label:"Status",filled:"",options:e.statusOptions,"map-options":"","emit-value":""},model:{value:e.value.status,callback:function(t){e.$set(e.value,"status",t)},expression:"value.status"}})],1),i("q-card-actions",{attrs:{align:"between"}},[i("q-btn",{staticClass:"q-ma-sm",attrs:{flat:"",color:"negative",icon:"mdi-delete"},on:{click:function(t){return e.$emit("update:delete-action",!0)}}}),i("q-btn",{staticClass:"q-ma-sm",attrs:{color:"primary",label:e.publishActionText,loading:e.saveLoading},on:{click:function(t){return e.$emit("save")}}})],1)],1)},yt=[],bt=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},gt=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let ht=class extends c["d"]{constructor(){super(...arguments),this.statusOptions=[{label:"Draft",value:"draft"},{label:"Private",value:"private"},{label:"Pending review",value:"pending_review"},{label:"Published",value:"publish"}]}get publishActionText(){return this.value?"publish"!==this.originalEntity.status&&"publish"===this.value.status?"Publish":"Update":""}};bt([Object(c["b"])(),gt("design:type","function"===typeof(ft="undefined"!==typeof u.a&&u.a)?ft:Object)],ht.prototype,"value",void 0),bt([Object(c["b"])(),gt("design:type","function"===typeof(vt="undefined"!==typeof u.a&&u.a)?vt:Object)],ht.prototype,"originalEntity",void 0),bt([Object(c["b"])({type:Boolean}),gt("design:type",Boolean)],ht.prototype,"saveLoading",void 0),bt([Object(c["b"])({type:Boolean}),gt("design:type",Boolean)],ht.prototype,"deleteAction",void 0),ht=bt([c["a"]],ht);var Ct=ht,xt=Ct,Ot=Object(x["a"])(xt,mt,yt,!1,null,null,null),jt=Ot.exports;S()(Ot,"components",{QCard:pe["a"],QCardSection:fe["a"],QSeparator:ve["a"],QSelect:$["a"],QCardActions:be["a"],QBtn:R["a"]});var Rt,Tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row justify-end"},[i("q-btn",{class:{"full-width":e.$q.screen.lt.lg},attrs:{label:"Page builder",icon:"mdi-toy-brick",color:"primary",outline:""},on:{click:function(t){e.goToPageBuilderAction=!0}}}),i("q-dialog",{attrs:{persistent:""},model:{value:e.goToPageBuilderAction,callback:function(t){e.goToPageBuilderAction=t},expression:"goToPageBuilderAction"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("q-avatar",{attrs:{icon:"mdi-exclamation-thick",color:"warning","text-color":"white"}}),i("span",{staticClass:"q-ml-sm"},[e._v("Do you want to save this "+e._s(e.typeName)+" before switching to page builder?")])],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"Cancel",color:"secondary"},on:{click:function(t){e.goToPageBuilderAction=!1}}}),i("q-btn",{attrs:{flat:"",label:"No",color:"secondary"},on:{click:function(t){return e.goToPageBuilder(!1)}}}),i("q-btn",{attrs:{flat:"",label:"Yes",color:"primary",autofocus:"",loading:e.saveLoading},on:{click:function(t){return e.goToPageBuilder(!0)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.goToPageBuilder(!0)}}})],1)],1)],1)],1)},qt=[],St=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},kt=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const _t=Object(f["a"])("ContentType");let Et=class extends c["d"]{constructor(){super(...arguments),this.goToPageBuilderAction=!1}goToPageBuilder(e){e?this.$emit("save",(()=>{this.$router.push({name:this.value.type+"_edit",params:{id:this.value.id.toString()}})})):this.$router.push({name:this.value.type+"_edit",params:{id:this.value.id.toString()}})}get typeName(){var e;return this.value?this.findByName(null===(e=this.value)||void 0===e?void 0:e.type).name.toLowerCase():""}};St([_t.Getter,kt("design:type",Object)],Et.prototype,"findByName",void 0),St([Object(c["b"])(),kt("design:type","function"===typeof(Rt="undefined"!==typeof u.a&&u.a)?Rt:Object)],Et.prototype,"value",void 0),St([Object(c["b"])({type:Boolean}),kt("design:type",Boolean)],Et.prototype,"saveLoading",void 0),Et=St([c["a"]],Et);var wt=Et,Ft=wt,Pt=Object(x["a"])(Ft,Tt,qt,!1,null,null,null),Qt=Pt.exports;S()(Pt,"components",{QBtn:R["a"],QDialog:ue["a"],QCard:pe["a"],QCardSection:fe["a"],QAvatar:me["a"],QCardActions:be["a"]});var At=i("c5f3"),Dt=i("7905");class Bt{getCustomField(e){let t=this.customFieldsComputed.find((t=>t.key===e));return t||(t=this.customFieldsComputed.find((e=>""===e.key))),this.setCustomFieldKey(t,e),this.customFieldsComputed.find((t=>t.key===e))}getCustomFieldValue(e){var t;return null===(t=this.customFieldsComputed.find((t=>t.key===e)))||void 0===t?void 0:t.value}setCustomFieldKey(e,t){const i=this.customFieldsComputed;i.find((t=>t.key===e.key)).key=t,this.customFieldsComputed=i}setCustomFieldValue(e,t){if(void 0===t)return void this.deleteCustomField(e);"string"===typeof e&&(e=this.getCustomField(e));const i=this.customFieldsComputed;i.find((t=>t.key===e.key)).value=t,this.customFieldsComputed=i}deleteCustomField(e){"string"===typeof e&&(e=this.getCustomField(e));const t=this.customFieldsComputed;t.splice(t.findIndex((t=>t.key===e.key)),1),this.customFieldsComputed=t}get customFieldsComputed(){const e=[];if(this.customFields)for(const t in this.customFields)this.customFields.hasOwnProperty(t)&&e.push({key:t,value:this.customFields[t]});return e.push({key:"",value:""}),e}set customFieldsComputed(e){this.customFields={};for(const t of e)t.key.trim()&&(this.customFields[t.key]=t.value)}}i("98db");var Lt=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},$t=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const Vt=Object(f["a"])("ContentType"),It=Object(f["a"])("Content"),Nt=Object(f["a"])("Taxonomy");let Mt=class extends c["d"]{constructor(){super(...arguments),this.model=null,this.saveLoading=!1,this.deleteLoading=!1,this.deleteAction=!1,this.tab="content",this.tabs=[{name:"content",icon:"mdi-file-document-edit-outline",label:"Content",panel:{component:"ClassicEditorPanelContent"}},{name:"seo",icon:"mdi-card-search-outline",label:"SEO",panel:{component:"ClassicEditorPanelSEO"}},{name:"custom_fields",icon:"mdi-form-textbox",label:"Custom fields",panel:{component:"ClassicEditorPanelCustomFields"}},{visible:e=>e.revisions.length>1,name:"revisions",icon:"mdi-timeline-text-outline",label:"Revisions",panel:{component:"ClassicEditorPanelRevisions"}}],this.sidebarComponents=[{component:"ClassicEditorSidebarSwitchPageBuilder"},{component:"ClassicEditorSidebarPublish"},{component:"ClassicEditorSidebarFeaturedImage"},{component:"ClassicEditorSidebarPageTemplate"},{id:"ClassicEditorSidebarTaxonomy_category",visible:()=>this.doesContentTypeHasTaxonomy("category"),component:"ClassicEditorSidebarTaxonomy",props:{taxonomy:"category"}},{id:"ClassicEditorSidebarTaxonomy_tag",visible:()=>this.doesContentTypeHasTaxonomy("tag"),component:"ClassicEditorSidebarTaxonomy",props:{taxonomy:"tag"}}]}created(){Dt["a"].emit("ContentEditClassic:sidebarComponents",{type:this.type,sidebarComponents:this.sidebarComponents}),Dt["a"].emit("ContentEditClassic:tabs",{type:this.type,tabs:this.tabs}),Dt["a"].on("ContentType:loaded",(()=>{this.getEntity()})),this.fetchTaxonomies(),this.contentTypes.length>0&&this.getEntity()}async getEntity(){this.originalEntity=await this.fetchFullById({type:this.type,id:this.id}),this.model=Object(s["plainToClassFromExist"])(new Bt,Object(Ae["cloneDeep"])(this.originalEntity)),this.fetchContentEntityRevisions(this.model)}async save(e){if(!this.model)return;this.saveLoading=!0;let t=Object(Ae["cloneDeep"])(this.model);t=await this.saveEntity(t),this.model=Object(s["plainToClassFromExist"])(new Bt,t),this.saveLoading=!1,e&&e(),await this.fetchContentEntityRevisions(this.model)}reload(){this.getEntity()}get typeName(){var e;return this.model?this.findByName(null===(e=this.model)||void 0===e?void 0:e.type).name.toLowerCase():""}async confirmDelete(){this.deleteLoading=!0,await this.deleteEntity(this.model),this.deleteLoading=!1,this.deleteAction=!1,await this.$router.push({name:this.type+"_index"})}get revisions(){var e;return this.contentEntitiesRevisions.hasOwnProperty(this.type)&&this.contentEntitiesRevisions[this.type].hasOwnProperty(this.id.toString())&&null!==(e=this.contentEntitiesRevisions[this.type][this.id.toString()])&&void 0!==e?e:[]}onRevisionsChanged(){"revisions"===this.tab&&this.revisions.length<=1&&(this.tab="content")}doesContentTypeHasTaxonomy(e){return this.taxonomies.filter((t=>{var i;return(null===(i=t.contentTypes)||void 0===i?void 0:i.includes(this.type))&&t.name===e})).length>0}get visibleTabs(){return this.tabs.filter((e=>!e.visible||e.visible(this)))}get visibleSidebarComponents(){return this.sidebarComponents.filter((e=>!e.visible||e.visible(this)))}};Lt([Vt.State,$t("design:type",Object)],Mt.prototype,"contentTypes",void 0),Lt([Vt.Getter,$t("design:type",Object)],Mt.prototype,"findByName",void 0),Lt([It.State,$t("design:type",Object)],Mt.prototype,"contentEntitiesRevisions",void 0),Lt([It.Action,$t("design:type",Object)],Mt.prototype,"fetchFullById",void 0),Lt([It.Action,$t("design:type",Object)],Mt.prototype,"saveEntity",void 0),Lt([It.Action,$t("design:type",Object)],Mt.prototype,"deleteEntity",void 0),Lt([It.Action,$t("design:type",Object)],Mt.prototype,"fetchContentEntityRevisions",void 0),Lt([Nt.State,$t("design:type",Array)],Mt.prototype,"taxonomies",void 0),Lt([Nt.Action,$t("design:type",Object)],Mt.prototype,"fetchTaxonomies",void 0),Lt([Object(c["b"])(),$t("design:type",Number)],Mt.prototype,"id",void 0),Lt([Object(c["b"])(),$t("design:type",String)],Mt.prototype,"type",void 0),Lt([Object(c["e"])("revisions"),$t("design:type",Function),$t("design:paramtypes",[]),$t("design:returntype",void 0)],Mt.prototype,"onRevisionsChanged",null),Mt=Lt([Object(c["a"])({components:{ClassicEditorPanelContent:_,ClassicEditorPanelSEO:_e,ClassicEditorPanelCustomFields:I,ClassicEditorPanelRevisions:he,ClassicEditorSidebarPublish:jt,ClassicEditorSidebarFeaturedImage:et,ClassicEditorSidebarSwitchPageBuilder:Qt,ClassicEditorSidebarPageTemplate:pt,ClassicEditorSidebarTaxonomy:Me,MediaSelect:Ge["a"],MediaLibraryDialog:At["a"]}})],Mt);var Ht=Mt,Kt=Ht,Ut=i("9989"),Gt=i("429b"),Yt=i("7460"),Jt=i("adad"),zt=i("823b"),Wt=i("de5e"),Xt=i("65c6"),Zt=i("6ac5"),ei=Object(x["a"])(Kt,n,a,!1,null,null,null);t["default"]=ei.exports;S()(ei,"components",{QPage:Ut["a"],QCard:pe["a"],QTabs:Gt["a"],QTab:Yt["a"],QSeparator:ve["a"],QTabPanels:Jt["a"],QTabPanel:zt["a"],QDialog:ue["a"],QCardSection:fe["a"],QAvatar:me["a"],QCardActions:be["a"],QBtn:R["a"],QPageSticky:Wt["a"],QToolbar:Xt["a"],QToolbarTitle:Zt["a"],QTooltip:T["a"]})}}]);